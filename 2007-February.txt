From hholzer at mail.berlios.de  Sun Feb  4 21:19:38 2007
From: hholzer at mail.berlios.de (hholzer at mail.berlios.de)
Date: Sun, 4 Feb 2007 21:19:38 +0100
Subject: [Destar-dev] r581 - branches/0.2.X
Message-ID: <200702042019.l14KJcCe011519@sheep.berlios.de>

Author: hholzer
Date: 2007-02-04 21:19:37 +0100 (Sun, 04 Feb 2007)
New Revision: 581

Modified:
   branches/0.2.X/backend.py
Log:
* fix typo in dialplan for cf-trunk


Modified: branches/0.2.X/backend.py
===================================================================
--- branches/0.2.X/backend.py	2007-01-30 21:53:16 UTC (rev 580)
+++ branches/0.2.X/backend.py	2007-02-04 20:19:37 UTC (rev 581)
@@ -228,7 +228,7 @@
 	c.append("; Dial result was 'timeout'")
 	c.append("exten=s,n(dialtimeout),Set(fw_ext=${DB(CFTO/${ARG4}/${ARG3})})")
 	c.append('exten=s,n,GotoIf($["${fw_ext}" != ""]?fw)')
-	c.append('exten=s,n,GotoIf($["{CDR(intrunk)}" = ""]?cftoend)')
+	c.append('exten=s,n,GotoIf($["${CDR(intrunk)}" = ""]?cftoend)')
 	c.append("exten=s,n,Set(fw_ext=${DB(CFTO-TRUNK/${ARG4}/${ARG3})})")
 	c.append('exten=s,n,GotoIf($["${fw_ext}" != ""]?fw)')
 	c.append("exten=s,n(cftoend),NoOp()")
@@ -241,7 +241,7 @@
 	c.append("; Dial result was 'busy'")
 	c.append("exten=s,MainDial+101(busy),Set(fw_ext=${DB(CFBS/${ARG4}/${ARG3})})")
 	c.append('exten=s,n,GotoIf($["${fw_ext}" != ""]?fw)')
-	c.append('exten=s,n,GotoIf($["{CDR(intrunk)}" = ""]?cfbsend)')
+	c.append('exten=s,n,GotoIf($["${CDR(intrunk)}" = ""]?cfbsend)')
 	c.append("exten=s,n,Set(fw_ext=${DB(CFBS-TRUNK/${ARG4}/${ARG3})})")
 	c.append('exten=s,n,GotoIf($["${fw_ext}" != ""]?fw)')
 	c.append("exten=s,n(cfbsend),NoOp()")



From hholzer at mail.berlios.de  Sun Feb  4 21:34:53 2007
From: hholzer at mail.berlios.de (hholzer at mail.berlios.de)
Date: Sun, 4 Feb 2007 21:34:53 +0100
Subject: [Destar-dev] r582 - in branches/0.2.X/misc: . redhat
Message-ID: <200702042034.l14KYrQi012815@sheep.berlios.de>

Author: hholzer
Date: 2007-02-04 21:34:51 +0100 (Sun, 04 Feb 2007)
New Revision: 582

Added:
   branches/0.2.X/misc/redhat/
   branches/0.2.X/misc/redhat/init.d
Log:
* added init file for redhat/fedora


Added: branches/0.2.X/misc/redhat/init.d
===================================================================
--- branches/0.2.X/misc/redhat/init.d	2007-02-04 20:19:37 UTC (rev 581)
+++ branches/0.2.X/misc/redhat/init.d	2007-02-04 20:34:51 UTC (rev 582)
@@ -0,0 +1,28 @@
+#!/bin/bash
+#
+# chkconfig: 35 99 00
+# description: destar.
+
+# Source the function library.
+. /etc/init.d/functions
+
+PIDFILE="/var/run/destar.pid"
+RETVAL=0
+
+# See how we were called.
+case "$1" in
+  start)
+	/usr/sbin/destar > /dev/null 2>&1 &
+	echo $! > $PIDFILE
+	RETVAL=0
+	;;
+  stop)
+	PID=`cat $PIDFILE`
+	kill $PID
+	;;
+  *)
+	echo $"Usage: $0 {start|stop}"
+	RETVAL=1
+esac
+
+exit $RETVAL



From hholzer at mail.berlios.de  Sun Feb  4 22:58:05 2007
From: hholzer at mail.berlios.de (hholzer at mail.berlios.de)
Date: Sun, 4 Feb 2007 22:58:05 +0100
Subject: [Destar-dev] r583 - in trunk: . misc misc/redhat
Message-ID: <200702042158.l14Lw5gA018647@sheep.berlios.de>

Author: hholzer
Date: 2007-02-04 22:58:02 +0100 (Sun, 04 Feb 2007)
New Revision: 583

Added:
   trunk/misc/redhat/
   trunk/misc/redhat/init.d
Modified:
   trunk/backend.py
   trunk/cfg_app_callfw.py
   trunk/cfg_app_voicemailsettings.py
   trunk/configlets.py
Log:
* added init file for redhat/fedora
* fix typo in dialplan for cf-trunk
* fix broken dialplan busy path
* fix for voicemail pin clearing
* make devstate settings optional
    


Modified: trunk/backend.py
===================================================================
--- trunk/backend.py	2007-02-04 20:34:51 UTC (rev 582)
+++ trunk/backend.py	2007-02-04 21:58:02 UTC (rev 583)
@@ -217,18 +217,18 @@
 	c.append("exten=s,n,Set(prng=${DB(PRNG/${ARG4}/${ARG3})})")
 	c.append(";")
 	c.append("; Dial")
-	c.append("exten=s,n(MainDial),NoOp()")
+	c.append("exten=s,n(dialstart),NoOp()")
         if tapisupport:
                 c.append("exten=s,n,UserEvent(TAPI|TAPIEVENT: LINE_NEWCALL ${ARG1})")
                 c.append("exten=s,n,UserEvent(TAPI|TAPIEVENT: LINE_CALLSTATE LINECALLSTATE_OFFERING)")
                 c.append("exten=s,n,UserEvent(TAPI|TAPIEVENT: SET CALLERID ${CALLERID})")
                 c.append("exten=s,n,UserEvent(TAPI|TAPIEVENT: LINE_CALLINFO LINECALLINFOSTATE_CALLERID)")
-	c.append("exten=s,n,Dial(${ARG1}${prng},${dsec},TtWw${dopt})")
+	c.append("exten=s,n(MainDial),Dial(${ARG1}${prng},${dsec},TtWw${dopt})")
 	c.append(";")
 	c.append("; Dial result was 'timeout'")
 	c.append("exten=s,n(dialtimeout),Set(fw_ext=${DB(CFTO/${ARG4}/${ARG3})})")
 	c.append('exten=s,n,GotoIf($["${fw_ext}" != ""]?fw)')
-	c.append('exten=s,n,GotoIf($["{CDR(intrunk)}" = ""]?cftoend)')
+	c.append('exten=s,n,GotoIf($["${CDR(intrunk)}" = ""]?cftoend)')
 	c.append("exten=s,n,Set(fw_ext=${DB(CFTO-TRUNK/${ARG4}/${ARG3})})")
 	c.append('exten=s,n,GotoIf($["${fw_ext}" != ""]?fw)')
 	c.append("exten=s,n(cftoend),NoOp()")
@@ -241,7 +241,7 @@
 	c.append("; Dial result was 'busy'")
 	c.append("exten=s,MainDial+101(busy),Set(fw_ext=${DB(CFBS/${ARG4}/${ARG3})})")
 	c.append('exten=s,n,GotoIf($["${fw_ext}" != ""]?fw)')
-	c.append('exten=s,n,GotoIf($["{CDR(intrunk)}" = ""]?cfbsend)')
+	c.append('exten=s,n,GotoIf($["${CDR(intrunk)}" = ""]?cfbsend)')
 	c.append("exten=s,n,Set(fw_ext=${DB(CFBS-TRUNK/${ARG4}/${ARG3})})")
 	c.append('exten=s,n,GotoIf($["${fw_ext}" != ""]?fw)')
 	c.append("exten=s,n(cfbsend),NoOp()")

Modified: trunk/cfg_app_callfw.py
===================================================================
--- trunk/cfg_app_callfw.py	2007-02-04 20:34:51 UTC (rev 582)
+++ trunk/cfg_app_callfw.py	2007-02-04 21:58:02 UTC (rev 583)
@@ -35,7 +35,7 @@
 			VarType("set",      title=_("Setting preffix"), len=6, default="*21"),
 			VarType("ext",   title=_("Unsetting extension"), len=6, default="*22"),
 			VarType("toggle",   title=_("Set function toggleable"), type="bool"),
-			VarType("devstateprefix",   title=_("Create Devstate extension. Devstate Prefix:"), len=8, default="")
+			VarType("devstateprefix",   title=_("Create Devstate extension. Devstate Prefix:"), len=8, optional=True, default="")
 		       	]
 
 		self.dependencies = [ DepType("pbx", 

Modified: trunk/cfg_app_voicemailsettings.py
===================================================================
--- trunk/cfg_app_voicemailsettings.py	2007-02-04 20:34:51 UTC (rev 582)
+++ trunk/cfg_app_voicemailsettings.py	2007-02-04 21:58:02 UTC (rev 583)
@@ -53,6 +53,7 @@
 			VarType("devstateprefix",
 				title=_("Create Devstate extension. Devstate Prefix:"),
 				len=8,
+				optional=True,
 				default="")
 		       	]
 

Modified: trunk/configlets.py
===================================================================
--- trunk/configlets.py	2007-02-04 20:34:51 UTC (rev 582)
+++ trunk/configlets.py	2007-02-04 21:58:02 UTC (rev 583)
@@ -1022,8 +1022,10 @@
 
 			vm = AstConf("voicemail.conf")
 			vm.setSection(self.pbx)
+			pin = ""
 			try:
-				pin = self.pin
+			        if self.pin != None:
+				        pin = self.pin
 			except:
 				pin = ""
 			#TODO: deal with timezones

Added: trunk/misc/redhat/init.d
===================================================================
--- trunk/misc/redhat/init.d	2007-02-04 20:34:51 UTC (rev 582)
+++ trunk/misc/redhat/init.d	2007-02-04 21:58:02 UTC (rev 583)
@@ -0,0 +1,28 @@
+#!/bin/bash
+#
+# chkconfig: 35 99 00
+# description: destar.
+
+# Source the function library.
+. /etc/init.d/functions
+
+PIDFILE="/var/run/destar.pid"
+RETVAL=0
+
+# See how we were called.
+case "$1" in
+  start)
+	/usr/sbin/destar > /dev/null 2>&1 &
+	echo $! > $PIDFILE
+	RETVAL=0
+	;;
+  stop)
+	PID=`cat $PIDFILE`
+	kill $PID
+	;;
+  *)
+	echo $"Usage: $0 {start|stop}"
+	RETVAL=1
+esac
+
+exit $RETVAL



From hholzer at mail.berlios.de  Sun Feb  4 23:37:37 2007
From: hholzer at mail.berlios.de (hholzer at mail.berlios.de)
Date: Sun, 4 Feb 2007 23:37:37 +0100
Subject: [Destar-dev] r584 - trunk
Message-ID: <200702042237.l14MbbDx021097@sheep.berlios.de>

Author: hholzer
Date: 2007-02-04 23:37:36 +0100 (Sun, 04 Feb 2007)
New Revision: 584

Modified:
   trunk/page_admin_viewconf.ptl
Log:
* fix showMissingModules function


Modified: trunk/page_admin_viewconf.ptl
===================================================================
--- trunk/page_admin_viewconf.ptl	2007-02-04 21:58:02 UTC (rev 583)
+++ trunk/page_admin_viewconf.ptl	2007-02-04 22:37:36 UTC (rev 584)
@@ -95,12 +95,12 @@
 
 			if not showForm.is_submitted():
 				header(_(self._q_desc))
-				if not missingModules == []: showMissingModules(missingModules)
+				if not missingModules == []: self.showMissingModules(missingModules)
 				showForm.render()
 
 			elif showForm['_show']:
 				header(_("Asterisk configuration files"))
-				if not missingModules == []: showMissingModules(missingModules)
+				if not missingModules == []: self.showMissingModules(missingModules)
 				entries = []
 				for file,cnf in configEntries:
 					if showForm[file]:
@@ -123,7 +123,7 @@
 				'</p>'
 		footer()
 
-	def showMissingModules [plain] (missingModules):
+	def showMissingModules [plain] (self, missingModules):
 		'<div id="error">\n'
 		'<p>'
 		htmltext(_("WARNING: This configuration might experience grave problems because the following asterisk modules are missing on your system:"))



From hholzer at mail.berlios.de  Mon Feb  5 00:52:57 2007
From: hholzer at mail.berlios.de (hholzer at mail.berlios.de)
Date: Mon, 5 Feb 2007 00:52:57 +0100
Subject: [Destar-dev] r585 - trunk/misc/redhat
Message-ID: <200702042352.l14Nqv8e003924@sheep.berlios.de>

Author: hholzer
Date: 2007-02-05 00:52:48 +0100 (Mon, 05 Feb 2007)
New Revision: 585

Added:
   trunk/misc/redhat/destar.spec
Modified:
   trunk/misc/redhat/init.d
Log:
* redhat/fedora: changed init file, added rpm spec file


Added: trunk/misc/redhat/destar.spec
===================================================================
--- trunk/misc/redhat/destar.spec	2007-02-04 22:37:36 UTC (rev 584)
+++ trunk/misc/redhat/destar.spec	2007-02-04 23:52:48 UTC (rev 585)
@@ -0,0 +1,56 @@
+Summary: Management Interface for the Asterisk PBX
+Name: destar
+Version: 0.3.0
+Release: 1
+License: GPL
+Group: System Environment/Daemons
+Source: %{name}-%{version}.tar.gz
+URL: http://destar.berlios.de/
+Buildroot: %{_tmppath}/%{name}-root
+Requires: python python-quixote
+
+%description
+DeStar is a Web-based management and configuration tool for the Asterisk PBX.
+DeStar's main features include hosted PBX and virtual PBX features which allow
+you to have several PBXs on a single machine. Extensions can be managed for
+SIP, IAX, Zap, and more.
+
+%prep
+%setup -q
+
+%build
+
+%install
+rm -rf %{buildroot}
+make install DESTDIR=%{buildroot}
+mkdir -p %{buildroot}%{_initrddir}
+cp misc/redhat/init.d %{buildroot}%{_initrddir}/destar
+
+%post
+# This adds the proper /etc/rc*.d links for the script
+/sbin/chkconfig --add destar
+
+%preun
+if [ $1 = 0 ]; then
+        /sbin/service destar stop >/dev/null 2>&1 || :
+        /sbin/chkconfig --del destar
+fi
+
+%postun
+if [ "$1" -ge "1" ]; then
+        /sbin/service destar condrestart >/dev/null 2>&1 || :
+fi
+
+%clean
+rm -rf %{buildroot}
+
+%files
+%defattr(-, root, root)
+%doc README.txt CHANGELOG.txt
+/usr/sbin/*
+/usr/share/*
+%config(noreplace) /etc/*
+
+%changelog
+* Mon Feb 5 2007 Harald Holzer <harald at hholzer.at>
+- initial spec.

Modified: trunk/misc/redhat/init.d
===================================================================
--- trunk/misc/redhat/init.d	2007-02-04 22:37:36 UTC (rev 584)
+++ trunk/misc/redhat/init.d	2007-02-04 23:52:48 UTC (rev 585)
@@ -9,20 +9,50 @@
 PIDFILE="/var/run/destar.pid"
 RETVAL=0
 
+start() {
+        # Start daemons.
+        echo -n $"Starting destar: "
+        /usr/sbin/destar > /dev/null 2>&1 &
+        RETVAL=$?
+        echo $! > $PIDFILE
+        echo
+        [ $RETVAL = 0 ] && touch /var/lock/subsys/destar
+}
+
+stop() {
+        # Stop daemons.
+        echo -n $"Shutting down destar: "
+	PID=`cat $PIDFILE`
+	kill $PID
+        RETVAL=$?
+        echo
+        [ $RETVAL = 0 ] && rm -f /var/lock/subsys/destar
+}
+
+restart() {
+        stop
+        start
+}
+
 # See how we were called.
 case "$1" in
   start)
-	/usr/sbin/destar > /dev/null 2>&1 &
-	echo $! > $PIDFILE
-	RETVAL=0
-	;;
+        start
+        ;;
   stop)
-	PID=`cat $PIDFILE`
-	kill $PID
-	;;
+        stop
+        ;;
+  restart)
+        restart
+        ;;
+  condrestart)
+        [ -f /var/lock/subsys/destar ] && restart || :
+        ;;
+  status)
+        ;;
   *)
-	echo $"Usage: $0 {start|stop}"
-	RETVAL=1
+        echo $"Usage: exim {start|stop|restart|status|condrestart}"
+        exit 1
 esac
 
 exit $RETVAL



From dasenjo at mail.berlios.de  Mon Feb  5 20:42:07 2007
From: dasenjo at mail.berlios.de (dasenjo at BerliOS)
Date: Mon, 5 Feb 2007 20:42:07 +0100
Subject: [Destar-dev] r586 - trunk
Message-ID: <200702051942.l15Jg7H6003602@sheep.berlios.de>

Author: dasenjo
Date: 2007-02-05 20:42:07 +0100 (Mon, 05 Feb 2007)
New Revision: 586

Modified:
   trunk/CHANGELOG.txt
   trunk/page_config_add.ptl
Log:
* Bug fix related with request object adding configlets.



Modified: trunk/CHANGELOG.txt
===================================================================
--- trunk/CHANGELOG.txt	2007-02-04 23:52:48 UTC (rev 585)
+++ trunk/CHANGELOG.txt	2007-02-05 19:42:07 UTC (rev 586)
@@ -1,3 +1,6 @@
+2007-02-05:
+* Bug fix related with request object adding configlets.
+
 2007-01-30:
 * Bug fixes related with request object and redirect function.
 

Modified: trunk/page_config_add.ptl
===================================================================
--- trunk/page_config_add.ptl	2007-02-04 23:52:48 UTC (rev 585)
+++ trunk/page_config_add.ptl	2007-02-05 19:42:07 UTC (rev 586)
@@ -38,4 +38,5 @@
 		if self.session.level < self._q_level:
 			cantAccessPage()
 
-	_q_lookup = lookupConfiglets
+	def _q_lookup(self,component):
+		return lookupConfiglets(self.request,component)



From santiago at mail.berlios.de  Mon Feb  5 21:20:30 2007
From: santiago at mail.berlios.de (santiago at BerliOS)
Date: Mon, 5 Feb 2007 21:20:30 +0100
Subject: [Destar-dev] r587 - trunk
Message-ID: <200702052020.l15KKUtc007219@sheep.berlios.de>

Author: santiago
Date: 2007-02-05 21:20:29 +0100 (Mon, 05 Feb 2007)
New Revision: 587

Modified:
   trunk/CHANGELOG.txt
   trunk/page_config.ptl
Log:
* page_config.ptl: some configletTip functions were called without self.



Modified: trunk/CHANGELOG.txt
===================================================================
--- trunk/CHANGELOG.txt	2007-02-05 19:42:07 UTC (rev 586)
+++ trunk/CHANGELOG.txt	2007-02-05 20:20:29 UTC (rev 587)
@@ -1,5 +1,6 @@
 2007-02-05:
 * Bug fix related with request object adding configlets.
+* page_config.ptl: some configletTip functions were called without self.
 
 2007-01-30:
 * Bug fixes related with request object and redirect function.

Modified: trunk/page_config.ptl
===================================================================
--- trunk/page_config.ptl	2007-02-05 19:42:07 UTC (rev 586)
+++ trunk/page_config.ptl	2007-02-05 20:20:29 UTC (rev 587)
@@ -71,13 +71,13 @@
 		groups = ", ".join(groups)
 
 		if self.session.user=='programmer':
-			configurationTip(
+			self.configurationTip(
 				_("You should create a user with type 'Configurator'. Without this user, everyone connecting to DeStar can configure everything."),
 				"add/CfgOptUser",
 				[_("Configuration"), _("Options"), _("DeStar user")] )
 
 		if not os.access("/etc/asterisk", os.O_RDWR):
-			configurationTip(
+			self.configurationTip(
 				_("You should enable write access to the directory /etc/asterisk. Without the ability to modify the configuration files DeStar would be pretty useless. You should 'chmod g+rwx' this directory and set it's group to one of '%s'." % groups),
 				"",
 				[])
@@ -112,7 +112,7 @@
 				[])
 		db_fn = "/var/log/asterisk/master.db"
 		if not os.access(db_fn, os.O_RDWR):
-			configurationTip(
+			self.configurationTip(
 				_("You don't seem to have access to %s yet created by cdr_sqlite3_custom. Without this file CDR reports wont be accesible trough this interface."),
 				"",
 				[])
@@ -120,7 +120,7 @@
 		if self.tipped:
 			'</ul>'
 
-	def showConfigurables [plain] (sefl, head):
+	def showConfigurables [plain] (self, head):
 		'<p>'
 		head
 		':</p><table id="subcategories"><thead>'



From dasenjo at mail.berlios.de  Mon Feb  5 21:39:25 2007
From: dasenjo at mail.berlios.de (dasenjo at BerliOS)
Date: Mon, 5 Feb 2007 21:39:25 +0100
Subject: [Destar-dev] r588 - trunk
Message-ID: <200702052039.l15KdP0i010205@sheep.berlios.de>

Author: dasenjo
Date: 2007-02-05 21:39:23 +0100 (Mon, 05 Feb 2007)
New Revision: 588

Modified:
   trunk/CHANGELOG.txt
   trunk/cfg_trunk_fwdiax.py
Log:
* Cosmetic changes and clidnum added to cfg_trunk_fwdiax.py



Modified: trunk/CHANGELOG.txt
===================================================================
--- trunk/CHANGELOG.txt	2007-02-05 20:20:29 UTC (rev 587)
+++ trunk/CHANGELOG.txt	2007-02-05 20:39:23 UTC (rev 588)
@@ -1,6 +1,7 @@
 2007-02-05:
 * Bug fix related with request object adding configlets.
 * page_config.ptl: some configletTip functions were called without self.
+* Cosmetic changes and clidnum added to cfg_trunk_fwdiax.py
 
 2007-01-30:
 * Bug fixes related with request object and redirect function.

Modified: trunk/cfg_trunk_fwdiax.py
===================================================================
--- trunk/cfg_trunk_fwdiax.py	2007-02-05 20:20:29 UTC (rev 587)
+++ trunk/cfg_trunk_fwdiax.py	2007-02-05 20:39:23 UTC (rev 588)
@@ -37,19 +37,53 @@
 	
 	def createVariables(self):
 		self.variables   = [
-			VarType("name",     title=_("Name"), len=15, default="fwdiax"),
-			VarType("fwdid",    title=_("FWD number"),   len=6),
-			VarType("fwdpw",    title=_("FWD password"), len=15),
+			VarType("name",
+				title=_("Name"),
+				len=15,
+				default="fwdiax"),
+
+			VarType("fwdid",
+				title=_("FWD number"),
+				len=6),
+
+			VarType("fwdpw",
+				title=_("FWD password"),
+				len=15),
 	
-			VarType("Outbound", title=_("Calls to FWD"), type="label"),
-			VarType("ext",      title=_("Extension"), optional=True, len=6),
-			VarType("context",  title=_("Context"), default="default", optional=True, hide=True),
-			VarType("callerid", title=_("Caller-Id Name"), optional=True),
+			VarType("Outbound",
+				title=_("Calls to FWD"),
+				type="label"),
+
+			VarType("ext",
+				title=_("Extension"),
+				optional=True,
+				len=6),
+
+			VarType("context",
+				title=_("Context"),
+				default="default",
+				optional=True,
+				hide=True),
+
+			VarType("callerid",
+				title=_("Change Caller*Id to:"),
+				len=25,
+				optional=True),
+
+ 			VarType("clidnumin",
+ 				title=_("Change Caller*Id Number to:"),
+ 				len=40,
+ 				optional=True),
 	
-			VarType("Inbound",  title=_("Calls from FWD"), type="label"),
-			VarType("phone",    title=_("Phone to ring"), optional=True, type="choice",
-								options=getChoice("CfgPhone"))
-		]
+			VarType("Inbound",
+				title=_("Calls from FWD"),
+				type="label"),
+
+			VarType("phone",
+				title=_("Phone to ring"),
+				optional=True,
+				type="choice",
+				options=getChoice("CfgPhone"))]
 		
 		self.dependencies = [
 			DepType("phone", 



From dasenjo at mail.berlios.de  Mon Feb  5 21:48:53 2007
From: dasenjo at mail.berlios.de (dasenjo at BerliOS)
Date: Mon, 5 Feb 2007 21:48:53 +0100
Subject: [Destar-dev] r589 - trunk
Message-ID: <200702052048.l15KmrYI010919@sheep.berlios.de>

Author: dasenjo
Date: 2007-02-05 21:48:53 +0100 (Mon, 05 Feb 2007)
New Revision: 589

Modified:
   trunk/CHANGELOG.txt
   trunk/cfg_trunk_zap.py
   trunk/cfg_trunk_zappbx.py
   trunk/cfg_trunk_zappri.py
Log:
* Added clidnumin to cfg_trunk_zap*.py



Modified: trunk/CHANGELOG.txt
===================================================================
--- trunk/CHANGELOG.txt	2007-02-05 20:39:23 UTC (rev 588)
+++ trunk/CHANGELOG.txt	2007-02-05 20:48:53 UTC (rev 589)
@@ -1,7 +1,8 @@
 2007-02-05:
 * Bug fix related with request object adding configlets.
 * page_config.ptl: some configletTip functions were called without self.
-* Cosmetic changes and clidnum added to cfg_trunk_fwdiax.py
+* Cosmetic changes and clidnumin added to cfg_trunk_fwdiax.py
+* Added clidnumin to cfg_trunk_zap*.py
 
 2007-01-30:
 * Bug fixes related with request object and redirect function.

Modified: trunk/cfg_trunk_zap.py
===================================================================
--- trunk/cfg_trunk_zap.py	2007-02-05 20:39:23 UTC (rev 588)
+++ trunk/cfg_trunk_zap.py	2007-02-05 20:48:53 UTC (rev 589)
@@ -84,6 +84,11 @@
 				len=25,
 				optional=True),
 
+ 			VarType("clidnumin",
+ 				title=_("Change Caller*Id Number to:"),
+ 				len=40,
+ 				optional=True),
+			
 			VarType("contextin",
 				title=_("Go to"),
 				type="radio",

Modified: trunk/cfg_trunk_zappbx.py
===================================================================
--- trunk/cfg_trunk_zappbx.py	2007-02-05 20:39:23 UTC (rev 588)
+++ trunk/cfg_trunk_zappbx.py	2007-02-05 20:48:53 UTC (rev 589)
@@ -91,6 +91,11 @@
 				len=25,
 				optional=True),
 
+ 			VarType("clidnumin",
+ 				title=_("Change Caller*Id Number to:"),
+ 				len=40,
+ 				optional=True),
+			
 			VarType("contextin",
 				title=_("Go to"),
 				type="radio",

Modified: trunk/cfg_trunk_zappri.py
===================================================================
--- trunk/cfg_trunk_zappri.py	2007-02-05 20:39:23 UTC (rev 588)
+++ trunk/cfg_trunk_zappri.py	2007-02-05 20:48:53 UTC (rev 589)
@@ -99,6 +99,11 @@
 				len=25,
 				optional=True),
 
+ 			VarType("clidnumin",
+ 				title=_("Change Caller*Id Number to:"),
+ 				len=40,
+ 				optional=True),
+			
 			VarType("contextin",
 				title=_("Go to"),
 				type="radio",



From dasenjo at mail.berlios.de  Tue Feb  6 00:19:48 2007
From: dasenjo at mail.berlios.de (dasenjo at BerliOS)
Date: Tue, 6 Feb 2007 00:19:48 +0100
Subject: [Destar-dev] r590 - trunk
Message-ID: <200702052319.l15NJmfQ020341@sheep.berlios.de>

Author: dasenjo
Date: 2007-02-06 00:19:47 +0100 (Tue, 06 Feb 2007)
New Revision: 590

Modified:
   trunk/CHANGELOG.txt
   trunk/cfg_trunk_fwdiax.py
   trunk/cfg_trunk_iax.py
   trunk/cfg_trunk_sip.py
   trunk/cfg_trunk_zap.py
   trunk/cfg_trunk_zappbx.py
   trunk/cfg_trunk_zappri.py
Log:
* Adjusted all labels and caller identifier for trunks.



Modified: trunk/CHANGELOG.txt
===================================================================
--- trunk/CHANGELOG.txt	2007-02-05 20:48:53 UTC (rev 589)
+++ trunk/CHANGELOG.txt	2007-02-05 23:19:47 UTC (rev 590)
@@ -3,6 +3,7 @@
 * page_config.ptl: some configletTip functions were called without self.
 * Cosmetic changes and clidnumin added to cfg_trunk_fwdiax.py
 * Added clidnumin to cfg_trunk_zap*.py
+* Adjusted all labels and caller identifier for trunks.
 
 2007-01-30:
 * Bug fixes related with request object and redirect function.

Modified: trunk/cfg_trunk_fwdiax.py
===================================================================
--- trunk/cfg_trunk_fwdiax.py	2007-02-05 20:48:53 UTC (rev 589)
+++ trunk/cfg_trunk_fwdiax.py	2007-02-05 23:19:47 UTC (rev 590)
@@ -50,10 +50,6 @@
 				title=_("FWD password"),
 				len=15),
 	
-			VarType("Outbound",
-				title=_("Calls to FWD"),
-				type="label"),
-
 			VarType("ext",
 				title=_("Extension"),
 				optional=True,
@@ -65,25 +61,40 @@
 				optional=True,
 				hide=True),
 
-			VarType("callerid",
+			VarType("Inbound",
+				title=_("For incoming calls through this trunk:"),
+				type="label"),
+
+			VarType("clid",
 				title=_("Change Caller*Id to:"),
-				len=25,
+				len=40,
 				optional=True),
 
- 			VarType("clidnumin",
- 				title=_("Change Caller*Id Number to:"),
- 				len=40,
- 				optional=True),
-	
-			VarType("Inbound",
-				title=_("Calls from FWD"),
-				type="label"),
+			VarType("clidnumin",
+				title=_("Change Caller*Id Number to:"),
+				len=40,
+				optional=True),
 
 			VarType("phone",
 				title=_("Phone to ring"),
 				optional=True,
 				type="choice",
-				options=getChoice("CfgPhone"))]
+				options=getChoice("CfgPhone")),
+
+			VarType("Outbound",
+				title=_("For outgoing calls through this trunk:"),
+				type="label"),
+
+			VarType("clidnameout",
+				title=_("Change Caller*Id to:"),
+				len=25,
+				optional=True),
+
+ 			VarType("clidnumout",
+ 				title=_("Change Caller*Id Number to:"),
+ 				len=40,
+ 				optional=True)]
+	
 		
 		self.dependencies = [
 			DepType("phone", 

Modified: trunk/cfg_trunk_iax.py
===================================================================
--- trunk/cfg_trunk_iax.py	2007-02-05 20:48:53 UTC (rev 589)
+++ trunk/cfg_trunk_iax.py	2007-02-05 23:19:47 UTC (rev 590)
@@ -91,7 +91,7 @@
 				optional=True),
 
 			VarType("Inbound",
-				title=_("Calls from IAX trunk"),
+				title=_("For incoming calls through this trunk:"),
 				type="label"),
 
 			VarType("clid",
@@ -129,7 +129,7 @@
 				options=getChoice("CfgOptPBX")),
 
 			VarType("Outbound",
-				title=_("Outgoing calls to IAX trunk"),
+				title=_("For outgoing calls through this trunk:"),
 				type="label"),
 
 			VarType("clidnameout",

Modified: trunk/cfg_trunk_sip.py
===================================================================
--- trunk/cfg_trunk_sip.py	2007-02-05 20:48:53 UTC (rev 589)
+++ trunk/cfg_trunk_sip.py	2007-02-05 23:19:47 UTC (rev 590)
@@ -80,7 +80,7 @@
                                optional=True),
 	
 			VarType("Inbound",
-				title=_("Calls from SIP trunk"),
+				title=_("For incoming calls through this trunk:"),
 				type="label"),
 				
 			VarType("clid",
@@ -118,7 +118,7 @@
 				options=getChoice("CfgOptPBX")),
 
  			VarType("Outbound",
- 				title=_("Outgoing calls to IAX trunk"),
+ 				title=_("For outgoing calls through this trunk:"),
  				type="label"),
  
  			VarType("clidnameout",

Modified: trunk/cfg_trunk_zap.py
===================================================================
--- trunk/cfg_trunk_zap.py	2007-02-05 20:48:53 UTC (rev 589)
+++ trunk/cfg_trunk_zap.py	2007-02-05 23:19:47 UTC (rev 590)
@@ -76,7 +76,7 @@
 				default="0.0"),
 
 			VarType("Inbound",
-				title=_("Calls from ZAP trunk"),
+				title=_("For incoming calls through this trunk:"),
 				type="label"),
 
 			VarType("clid",
@@ -107,6 +107,20 @@
 				optional=True,
 				options=getChoice("CfgIVR")),
 
+			VarType("Outbound",
+				title=_("For outgoing calls through this trunk:"),
+				type="label"),
+
+			VarType("clidnameout",
+				title=_("Change Caller*Id Name to:"),
+				len=40,
+				optional=True),
+
+			VarType("clidnumout",
+				title=_("Change Caller*Id Number to:"),
+				len=40,
+				optional=True),
+
 			VarType("dial",
 				hide=True,
 				len=50),]

Modified: trunk/cfg_trunk_zappbx.py
===================================================================
--- trunk/cfg_trunk_zappbx.py	2007-02-05 20:48:53 UTC (rev 589)
+++ trunk/cfg_trunk_zappbx.py	2007-02-05 23:19:47 UTC (rev 590)
@@ -83,7 +83,7 @@
 				optional=False ),
 	
 			VarType("Inbound",
-				title=_("Calls from SIP trunk"),
+				title=_("For incoming calls through this trunk:"),
 				type="label"),
 
 			VarType("clid",
@@ -120,6 +120,20 @@
 				optional=True,
 				options=getChoice("CfgOptPBX")),
 
+			VarType("Outbound",
+				title=_("For outgoing calls through this trunk:"),
+				type="label"),
+
+			VarType("clidnameout",
+				title=_("Change Caller*Id Name to:"),
+				len=40,
+				optional=True),
+
+			VarType("clidnumout",
+				title=_("Change Caller*Id Number to:"),
+				len=40,
+				optional=True),
+
 			VarType("dial",
 				hide=True,
 				len=50),]

Modified: trunk/cfg_trunk_zappri.py
===================================================================
--- trunk/cfg_trunk_zappri.py	2007-02-05 20:48:53 UTC (rev 589)
+++ trunk/cfg_trunk_zappri.py	2007-02-05 23:19:47 UTC (rev 590)
@@ -91,7 +91,7 @@
 				default="0.0"),
 
 			VarType("Inbound",
-				title=_("Calls from PRI channel(s)"),
+				title=_("For incoming calls through this trunk:"),
 				type="label"),
 
 			VarType("clid",
@@ -127,6 +127,20 @@
 				type="choice",
 				optional=True,options=getChoice("CfgOptPBX")),
 
+			VarType("Outbound",
+				title=_("For outgoing calls through this trunk:"),
+				type="label"),
+
+			VarType("clidnameout",
+				title=_("Change Caller*Id Name to:"),
+				len=40,
+				optional=True),
+
+			VarType("clidnumout",
+				title=_("Change Caller*Id Number to:"),
+				len=40,
+				optional=True),
+
 			VarType("dial",
 				hide=True,
 				len=50),]



From admin at berlios.de  Thu Feb  8 14:33:27 2007
From: admin at berlios.de (admin at berlios.de)
Date: Thu, 8 Feb 2007 11:33:27 -0200 (BRST)
Subject: [Destar-dev] [Patch #1878] Disa support
Message-ID: <200702081333.l18DXRpr011779@unicorn.berlios.de>

Patch #1878 has been updated. 

Project: destar
Category: None
Status: Open
Submitted by: imesper
Assigned to : none
Summary: Disa support

-------------------------------------------------------
For more info, visit:

http://developer.berlios.de/patch/?func=detailpatch&patch_id=1878&group_id=2112


From dasenjo at mail.berlios.de  Thu Feb  8 15:34:24 2007
From: dasenjo at mail.berlios.de (dasenjo at BerliOS)
Date: Thu, 8 Feb 2007 15:34:24 +0100
Subject: [Destar-dev] r591 - trunk
Message-ID: <200702081434.l18EYO9L027719@sheep.berlios.de>

Author: dasenjo
Date: 2007-02-08 15:34:23 +0100 (Thu, 08 Feb 2007)
New Revision: 591

Added:
   trunk/cfg_app_disa.py
Modified:
   trunk/CHANGELOG.txt
Log:
* Added DISA support (Patch #1878 by imesper)



Modified: trunk/CHANGELOG.txt
===================================================================
--- trunk/CHANGELOG.txt	2007-02-05 23:19:47 UTC (rev 590)
+++ trunk/CHANGELOG.txt	2007-02-08 14:34:23 UTC (rev 591)
@@ -1,3 +1,6 @@
+2007-02-08:
+* Added DISA support (Patch #1878 by imesper)
+
 2007-02-05:
 * Bug fix related with request object adding configlets.
 * page_config.ptl: some configletTip functions were called without self.

Added: trunk/cfg_app_disa.py
===================================================================
--- trunk/cfg_app_disa.py	2007-02-05 23:19:47 UTC (rev 590)
+++ trunk/cfg_app_disa.py	2007-02-08 14:34:23 UTC (rev 591)
@@ -0,0 +1,87 @@
+# -*- coding: iso-latin-1 -*-
+#
+# Destar has Copyright (C) 2005 by Holger Schurig
+# This file has Copyright (C) 2007 by Ian Sper 
+# 
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2 of the License, or
+# (at your option) any later version.
+#
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+#
+
+
+from configlets import *
+
+class CfgAppDisa(CfgApp):
+
+	shortName   = _("Disa extension")
+	description = _("Direct Inward System Access")
+	newObjectTitle = _("New Disa extension") 
+	def createVariables(self):	
+		self.variables   = [
+			VarType("pbx",
+				title=_("Virtual PBX"),
+				type="choice",
+				options=getChoice("CfgOptPBX")),
+
+			VarType("name",
+				title=_("Name"),
+				len=20),
+
+			VarType("pin",
+				title=_("Password"),
+				len=20),
+
+			VarType("ext",
+				title=_("Extension"),
+				len=6,
+				default="*171"),
+
+			VarType("Dialout",
+				title=_("Allowed dialout-entries"),
+				type="label",
+				hide=True),
+
+			VarType("timeout",
+				title=_("Enable time restriction?"),
+				type="bool",
+				optional=True,
+				hide=True),]
+		if varlist_manager.hasDialouts():
+                        self.variables += varlist_manager.getDialouts()
+                        for v in self.variables:
+                                if v.name == "Dialout" or v.name=="timeout":
+                                        v.hide = False
+	
+	
+	def row(self):
+		return ("%s" % (self.ext),self.shortName)
+
+	def checkConfig(self):
+                import configlets
+                for o in configlets.configlet_tree:
+                        if o==self: continue
+                        try:
+                                if o.ext == self.ext:
+                                        return ("ext", _("Extension already in use"))
+                        except AttributeError:
+                                pass
+	
+
+	def createAsteriskConfig(self):
+		c = AstConf("extensions.conf")
+		c.setSection("%s" % self.pbx)
+		needModule("app_disa")	
+		c.appendExten("%s" % self.ext ,"Set(TIMEOUT(digit)=5)")
+		c.appendExten("%s" % self.ext ,"Set(TIMEOUT(response)=10)")
+		c.appendExten("%s" % self.ext ,"Authenticate(%s)" % self.pin)
+		c.appendExten("%s" % self.ext ,"DISA(no-password|out-%s)" % self.name)



From admin at berlios.de  Thu Feb  8 15:39:47 2007
From: admin at berlios.de (admin at berlios.de)
Date: Thu, 8 Feb 2007 09:39:47 -0500 (COT)
Subject: [Destar-dev] [Patch #1878] Disa support
Message-ID: <200702081439.l18EdlBr014677@unicorn.berlios.de>

Patch #1878 has been updated. 

Project: destar
Category: None
Status: Accepted
Submitted by: imesper
Assigned to : none
Summary: Disa support

Follow-Ups:

Date: 2007-Feb-08 09:39
By: dasenjo

Comment:
Hi!

Thanks for the patch. I have just commited with come modifications. I did not know about DISA, it's cool!

I think that there is no need of answering the line, cause if you are in the PBX there is no line to answer, and if you are out of it, you should dial through a trunk that have to get rid of that, I changed the timeout lines to the new syntax and remove the createOutgoingContext line cause I think that this have to be done by a real phone.

I going to test it in the afternoon. 

See you.



-------------------------------------------------------

-------------------------------------------------------
For more info, visit:

http://developer.berlios.de/patch/?func=detailpatch&patch_id=1878&group_id=2112


From admin at berlios.de  Thu Feb  8 18:33:14 2007
From: admin at berlios.de (admin at berlios.de)
Date: Thu, 8 Feb 2007 12:33:14 -0500 (COT)
Subject: [Destar-dev] [Feature #2319] Queues statistics
Message-ID: <200702081733.l18HXEJ8028763@unicorn.berlios.de>

Feature Request #2319, was updated on 2006-Jun-21 22:45
You can respond by visiting: 
http://developer.berlios.de/feature/?func=detailfeature&feature_id=2319&group_id=2112

Category: None
Status: Open
Priority: 9
Summary: Queues statistics

By: alerios
Date: 2007-Feb-08 12:33

Message:
Logged In: YES 
user_id=11067
Browser: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.8.1.1) Gecko/20061205 Iceweasel/2.0.0.1 (Debian-2.0.0.1+dfsg-2)

I started to work on this new feature.

----------------------------------------------------------------------

By: alerios
Date: 2006-Jun-21 22:45

Message:
Logged In: YES 
user_id=11067
Browser: Mozilla/5.0 (X11; U; Linux i686; es-AR; rv:1.7.13) Gecko/20060418 Firefox/1.0.8 (Ubuntu package 1.0.8)

There's a new GPL'ed queues stats program [1] that we
can use to help us integrate queues statistics on
destar. They have some python code that we can use and
extend to make destar even more useful.

[1]http://www.micpc.com/qloganalyzer/

I don't thing we have time now to put this on 0.2, but
we certainly can have it on 0.3


----------------------------------------------------------------------
You can respond by visiting: 
http://developer.berlios.de/feature/?func=detailfeature&feature_id=2319&group_id=2112


From alejandro.rios at avatar.com.co  Thu Feb  8 23:52:38 2007
From: alejandro.rios at avatar.com.co (Alejandro Rios =?ISO-8859-1?Q?Pe=F1a?=)
Date: Thu, 08 Feb 2007 17:52:38 -0500
Subject: [Destar-dev] Release plan for 0.3
Message-ID: <1170975158.3345.116.camel@localhost>

Hello.

After a short talk on #destar, we have scheduled a new release plan for
next version:

http://openfacts.berlios.de/index-en.phtml?title=DeStarReleasePlan

Feel free to drop your comments by the list or in the wiki page.

Regards,

Alejandro R?os Pe?a.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Esta parte del mensaje est? firmada	digitalmente
URL: <https://lists.berlios.de/pipermail/destar-dev/attachments/20070208/4d280587/attachment.pgp>

From dasenjo at mail.berlios.de  Fri Feb 16 17:59:57 2007
From: dasenjo at mail.berlios.de (dasenjo at BerliOS)
Date: Fri, 16 Feb 2007 17:59:57 +0100
Subject: [Destar-dev] r592 - trunk
Message-ID: <200702161659.l1GGxv2J016793@sheep.berlios.de>

Author: dasenjo
Date: 2007-02-16 17:59:57 +0100 (Fri, 16 Feb 2007)
New Revision: 592

Modified:
   trunk/CHANGELOG.txt
   trunk/cfg_opt_sip_network.py
Log:
* Added externhost support in sip.conf through SIP Options.



Modified: trunk/CHANGELOG.txt
===================================================================
--- trunk/CHANGELOG.txt	2007-02-08 14:34:23 UTC (rev 591)
+++ trunk/CHANGELOG.txt	2007-02-16 16:59:57 UTC (rev 592)
@@ -1,3 +1,6 @@
+2007-02-16:
+* Added externhost support in sip.conf through SIP Options.
+
 2007-02-08:
 * Added DISA support (Patch #1878 by imesper)
 

Modified: trunk/cfg_opt_sip_network.py
===================================================================
--- trunk/cfg_opt_sip_network.py	2007-02-08 14:34:23 UTC (rev 591)
+++ trunk/cfg_opt_sip_network.py	2007-02-16 16:59:57 UTC (rev 592)
@@ -58,11 +58,12 @@
 					title=_("External/Internal IP"), 
 					type="label"),
 
-			VarType("setExt",	
-					title=_("Force external ip/internel network?"),	
-					type="bool"),
+			VarType("externhost",	
+					title=_("External hostname"), 
+					len=25,
+					optional=True),
 
-			VarType("extip",	
+			VarType("externip",	
 					title=_("External ip"), 
 					len=25,
 					optional=True),
@@ -118,11 +119,14 @@
 		c.setSection("general")
 		if self.doBind:
 			c.append("bindaddr=%s" % self.bindaddr)
-		if self.setExt:
-			if self.extip:
-				c.append("externip=%s" % self.extip)
+		if self.externip:
+			c.append("externip=%s" % self.externip)
 			if self.intnet:
 				c.append("localnet=%s/%s" % (self.intnet,self.intnetmask))
+		if self.externhost:
+			c.append("externhost=%s" % self.externhost)
+			if self.intnet:
+				c.append("localnet=%s/%s" % (self.intnet,self.intnetmask))
 		if self.tos:
 			c.append("tos=%s" % self.tos)
 		if self.moh:



From santiago at mail.berlios.de  Fri Feb 16 22:44:24 2007
From: santiago at mail.berlios.de (santiago at BerliOS)
Date: Fri, 16 Feb 2007 22:44:24 +0100
Subject: [Destar-dev] r593 - trunk
Message-ID: <200702162144.l1GLiOB7015009@sheep.berlios.de>

Author: santiago
Date: 2007-02-16 22:44:23 +0100 (Fri, 16 Feb 2007)
New Revision: 593

Modified:
   trunk/CHANGELOG.txt
   trunk/page_config.ptl
   trunk/page_main.ptl
Log:
* Redirecting to login when no user is logged
* Create PBX configuration tip



Modified: trunk/CHANGELOG.txt
===================================================================
--- trunk/CHANGELOG.txt	2007-02-16 16:59:57 UTC (rev 592)
+++ trunk/CHANGELOG.txt	2007-02-16 21:44:23 UTC (rev 593)
@@ -1,5 +1,7 @@
 2007-02-16:
 * Added externhost support in sip.conf through SIP Options.
+* Redirecting to login when no user is logged
+* Create PBX configuration tip
 
 2007-02-08:
 * Added DISA support (Patch #1878 by imesper)

Modified: trunk/page_config.ptl
===================================================================
--- trunk/page_config.ptl	2007-02-16 16:59:57 UTC (rev 592)
+++ trunk/page_config.ptl	2007-02-16 21:44:23 UTC (rev 593)
@@ -88,6 +88,12 @@
 				"add/CfgOptManager",
 				[_("Configuration"), _("Options"), _("Management API access")] )
 
+		if not backend.countConfiglets(clazz="CfgOptPBX"):
+			self.configurationTip(
+				_("You should create a PBX. Without a PBX, you can't create phones."),
+				"pbx/",
+				[_("Configuration"), _("PBX")] )
+
 		if not backend.countConfiglets("Phones"):
 			self.configurationTip(
 				_("You should create a phone. Without defined phones you can't make and receive calls."),

Modified: trunk/page_main.ptl
===================================================================
--- trunk/page_main.ptl	2007-02-16 16:59:57 UTC (rev 592)
+++ trunk/page_main.ptl	2007-02-16 21:44:23 UTC (rev 593)
@@ -20,7 +20,7 @@
 
 from Templates import *
 import sys, os, quixote, backend
-from quixote import get_session, get_session_manager
+from quixote import get_session, get_session_manager, redirect
 from quixote.util import StaticDirectory
 from quixote.directory import Directory, AccessControlled
 
@@ -134,9 +134,8 @@
 #######################################################################
 
 	def _q_index [plain] (self):
-                #session = get_session()
-		#if session.level < 1:
-		#	return get_request().redirect(str('/login'))
+		if get_session().level < 1:
+			return redirect(str('/login'))
 		header(self._q_desc)
 		'<p>'
 		'This page is empty. Please select one option from the menu on the left side.'



From dasenjo at mail.berlios.de  Thu Feb 22 05:01:57 2007
From: dasenjo at mail.berlios.de (dasenjo at BerliOS)
Date: Thu, 22 Feb 2007 05:01:57 +0100
Subject: [Destar-dev] r594 - trunk
Message-ID: <200702220401.l1M41vls002354@sheep.berlios.de>

Author: dasenjo
Date: 2007-02-22 05:01:56 +0100 (Thu, 22 Feb 2007)
New Revision: 594

Added:
   trunk/cfg_opt_iax.py
Modified:
   trunk/CHANGELOG.txt
Log:
* Added new configlet for configure some IAX general options.



Modified: trunk/CHANGELOG.txt
===================================================================
--- trunk/CHANGELOG.txt	2007-02-16 21:44:23 UTC (rev 593)
+++ trunk/CHANGELOG.txt	2007-02-22 04:01:56 UTC (rev 594)
@@ -1,3 +1,6 @@
+2007-02-21:
+* Added new configlet for configure some IAX general options.
+
 2007-02-16:
 * Added externhost support in sip.conf through SIP Options.
 * Redirecting to login when no user is logged

Added: trunk/cfg_opt_iax.py
===================================================================
--- trunk/cfg_opt_iax.py	2007-02-16 21:44:23 UTC (rev 593)
+++ trunk/cfg_opt_iax.py	2007-02-22 04:01:56 UTC (rev 594)
@@ -0,0 +1,90 @@
+# -*- coding: iso-latin-1 -*-
+#
+# This module is Copyright (C) 2007 by dasenjo,
+# Destar is Copyright (C) 2005 by Holger Schurig,
+# 
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2 of the License, or
+# (at your option) any later version.
+#
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+#
+
+
+from configlets import *
+
+
+class CfgOptIAX(CfgOptSingle):
+
+	shortName = _("IAX Options")
+	newObjectTitle = _("IAX Options")
+	
+	def createVariables(self):
+		self.variables = [
+			VarType("bindaddr",	
+					title=_("Bind address"), 
+					len=25,
+					optional=True),
+
+			VarType("bindport",	
+					title=_("Bind port"), 
+					type="int",
+					len=25,
+					optional=True),
+
+			VarType("jitterbuffer",	
+					title=_("Use jitterbuffer?"), 
+					type="bool",
+					optional=True),
+
+			VarType("forcejitterbuffer",	
+					title=_("Force jitterbuffer?"), 
+					type="bool",
+					optional=True),
+
+			VarType("tos",
+					title=_("TOS Field"),
+					len=14,
+					optional=True,
+					default="lowdelay"),]
+
+	def checkConfig(self):
+		res = CfgOpt.checkConfig(self)
+                if res:
+                        return res
+
+	def isAddable(self):
+		"""We can only add this configlet if we have at least one
+		IAX phone/trunk defined."""
+
+		# BUG: it does somehow not work to simply write for obj in config_entries,
+		# despite the "from configlets import *" above
+		import configlets
+		for obj in configlets.configlet_tree:
+			if obj.__class__.__name__ in ('CfgPhoneIax','CfgTrunkIaxtrunk'):
+				return CfgOptSingle.isAddable(self)
+		return False
+	isAddable = classmethod(isAddable)
+
+
+	def createAsteriskConfig(self):
+		c = AstConf("iax.conf")
+		c.setSection("general")
+		if self.bindaddr:
+			c.append("bindaddr=%s" % self.bindaddr)
+		if self.bindport:
+			c.append("bindport=%s" % self.bindport)
+		if self.jitterbuffer:
+			c.append("jitterbuffer=yes")
+		if self.forcejitterbuffer:
+			c.append("forcejitterbuffer=yes")
+		if self.tos:
+			c.append("tos=%s" % self.tos)



From santiago at mail.berlios.de  Fri Feb 23 00:02:59 2007
From: santiago at mail.berlios.de (santiago at BerliOS)
Date: Fri, 23 Feb 2007 00:02:59 +0100
Subject: [Destar-dev] r595 - trunk
Message-ID: <200702222302.l1MN2xEM011937@sheep.berlios.de>

Author: santiago
Date: 2007-02-23 00:02:58 +0100 (Fri, 23 Feb 2007)
New Revision: 595

Modified:
   trunk/CHANGELOG.txt
   trunk/page_main.ptl
   trunk/page_stats_cdr.ptl
   trunk/page_stats_dialouts.ptl
Log:
* Fixed statistics displaying



Modified: trunk/CHANGELOG.txt
===================================================================
--- trunk/CHANGELOG.txt	2007-02-22 04:01:56 UTC (rev 594)
+++ trunk/CHANGELOG.txt	2007-02-22 23:02:58 UTC (rev 595)
@@ -1,3 +1,6 @@
+2007-02-22:
+* Fixed statistics displaying
+
 2007-02-21:
 * Added new configlet for configure some IAX general options.
 

Modified: trunk/page_main.ptl
===================================================================
--- trunk/page_main.ptl	2007-02-22 04:01:56 UTC (rev 594)
+++ trunk/page_main.ptl	2007-02-22 23:02:58 UTC (rev 595)
@@ -64,9 +64,7 @@
 		# Import all cfg_*.py files once when the module loads.
 		for s in os.listdir(backend.CONFIGLETS_DIR):
 			#continue
-			if not s.startswith('page_main') and not s.startswith('page_user') \
-			and not s.startswith('page_login') and not s.startswith('page_admin') \
-			and not s.startswith('page_logout') and not s.startswith('page_config') :
+			if not s.startswith('page_'):
 				continue
 			m = None
 			if s.endswith('.ptl'):

Modified: trunk/page_stats_cdr.ptl
===================================================================
--- trunk/page_stats_cdr.ptl	2007-02-22 04:01:56 UTC (rev 594)
+++ trunk/page_stats_cdr.ptl	2007-02-22 23:02:58 UTC (rev 595)
@@ -315,5 +315,5 @@
 
 	def _q_index [plain] (self):
 		header(self._q_desc, scripts=[formScript])
-		cdrForm(request)
+		cdrForm(self.request)
 		footer()

Modified: trunk/page_stats_dialouts.ptl
===================================================================
--- trunk/page_stats_dialouts.ptl	2007-02-22 04:01:56 UTC (rev 594)
+++ trunk/page_stats_dialouts.ptl	2007-02-22 23:02:58 UTC (rev 595)
@@ -188,7 +188,7 @@
 	def _q_index [plain] (self):
 		header(self._q_desc)
 		if pychart_exists:
-			cdrForm(request)
+			cdrForm(self.request)
 		else:
 			_("You need to install pychart and use a cdr with sqlite to get these statistics")
 		footer()



From admin at berlios.de  Fri Feb 23 22:28:02 2007
From: admin at berlios.de (admin at berlios.de)
Date: Fri, 23 Feb 2007 16:28:02 -0500 (COT)
Subject: [Destar-dev] [Bug #10469] zaphfc trunk config doesn't work
Message-ID: <200702232128.l1NLS2J5021028@unicorn.berlios.de>

Bug #10469, was updated on 2007-Feb-23 16:28
Here is a current snapshot of the bug.

Project: DeStar
Category: None
Status: Open
Resolution: None
Bug Group: None
Priority: 7
Submitted by: santiago
Assigned to : none
Summary: zaphfc trunk config doesn't work 

Details: the zaphfc trunk configure option doesn't work. 

In destar-0.2.X:

Traceback (most recent call last):
  File "/var/lib/python-support/python2.4/quixote/publish.py", line 522, in process_request
    output = self.try_publish(request, env.get('PATH_INFO', ''))
  File "/var/lib/python-support/python2.4/quixote/publish.py", line 444, in try_publish
    self.namespace_stack)
  File "/var/lib/python-support/python2.4/quixote/publish.py", line 697, in _traverse_url
    namespace_stack)
  File "/var/lib/python-support/python2.4/quixote/publish.py", line 802, in _get_component
    object = container._q_lookup(request, component)
  File "/home/santiago/proyectos/destar-0.2.x/ConfigHelper.ptl", line 125, in lookupConfiglets
    new=True)
  File "/home/santiago/proyectos/destar-0.2.x/ConfigHelper.ptl", line 338, in configletsForm
    checkConfig()
  File "/home/santiago/proyectos/destar-0.2.x/ConfigHelper.ptl", line 191, in checkConfig
    ret = obj.checkConfig()
  File "/home/santiago/proyectos/destar-0.2.x/cfg_trunk_zaphfc.py", line 43, in checkConfig
    res = CfgTrunk.checkConfig(self)
  File "/home/santiago/proyectos/destar-0.2.x/configlets.py", line 874, in checkConfig
    if self.contextin == 'phone' and not self.phone:
  File "/home/santiago/proyectos/destar-0.2.x/configlets.py", line 508, in __getattr__
    raise AttributeError
AttributeError

Also, see http://bugs.debian.org/410341

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=10469&group_id=2112


From santiago at avatar.com.co  Fri Feb 23 23:23:31 2007
From: santiago at avatar.com.co (Santiago =?ISO-8859-1?Q?Jos=E9?= Ruano =?ISO-8859-1?Q?Rinc=F3n?=)
Date: Fri, 23 Feb 2007 17:23:31 -0500
Subject: [Destar-dev] [Bug #10469] zaphfc trunk config doesn't work
In-Reply-To: <200702232128.l1NLS2J5021028@unicorn.berlios.de>
References: <200702232128.l1NLS2J5021028@unicorn.berlios.de>
Message-ID: <1172269411.4229.38.camel@localhost.localdomain>

Hi, 

The zaphfc configlet has a lot of errors, i.e. it doesn't have Inbound
options, it always asigns group=1 and channel=1-2 in zapata.conf

Telcos don't offer BRI channels in this part of the world, so, I can't
test the configlet really. I need that someone with a BRI channel
correct, or at least, confirm that it works.

Best regards,

-- 
Santiago Ruano Rinc?n
http://www.avatar.com.co
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Esta parte del mensaje est? firmada	digitalmente
URL: <https://lists.berlios.de/pipermail/destar-dev/attachments/20070223/0afdd72f/attachment.pgp>

From santiago at avatar.com.co  Sat Feb 24 00:32:43 2007
From: santiago at avatar.com.co (Santiago =?ISO-8859-1?Q?Jos=E9?= Ruano =?ISO-8859-1?Q?Rinc=F3n?=)
Date: Fri, 23 Feb 2007 18:32:43 -0500
Subject: [Destar-dev] [Bug #10469] zaphfc trunk config doesn't work
In-Reply-To: <200702232128.l1NLS2J5021028@unicorn.berlios.de>
References: <200702232128.l1NLS2J5021028@unicorn.berlios.de>
Message-ID: <1172273563.4229.68.camel@localhost.localdomain>

Hi, 

The zaphfc configlet has a lot of errors, i.e. it doesn't have Inbound
options, it always asigns group=1 and channel=1-2 in zapata.conf

Telcos don't offer BRI channels in this part of the world, so, I can't
test the configlet really. I need that someone with a BRI channel
correct, or at least, confirm that it works.

Best regards,

-- 
Santiago Ruano Rinc?n
http://www.avatar.com.co
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Esta parte del mensaje est? firmada	digitalmente
URL: <https://lists.berlios.de/pipermail/destar-dev/attachments/20070223/9cebfe0b/attachment.pgp>

From santiago at mail.berlios.de  Mon Feb 26 17:59:08 2007
From: santiago at mail.berlios.de (santiago at BerliOS)
Date: Mon, 26 Feb 2007 17:59:08 +0100
Subject: [Destar-dev] r596 - trunk
Message-ID: <200702261659.l1QGx8na031934@sheep.berlios.de>

Author: santiago
Date: 2007-02-26 17:59:07 +0100 (Mon, 26 Feb 2007)
New Revision: 596

Modified:
   trunk/CHANGELOG.txt
   trunk/page_login.ptl
Log:
* Fixed "cancel" option in page_login



Modified: trunk/CHANGELOG.txt
===================================================================
--- trunk/CHANGELOG.txt	2007-02-22 23:02:58 UTC (rev 595)
+++ trunk/CHANGELOG.txt	2007-02-26 16:59:07 UTC (rev 596)
@@ -1,3 +1,6 @@
+2007-02-26:
+* Fixed "cancel" option in page_login
+
 2007-02-22:
 * Fixed statistics displaying
 

Modified: trunk/page_login.ptl
===================================================================
--- trunk/page_login.ptl	2007-02-22 23:02:58 UTC (rev 595)
+++ trunk/page_login.ptl	2007-02-26 16:59:07 UTC (rev 596)
@@ -60,7 +60,7 @@
 	def notLoggedIn [plain] (self):
 		'<p>'
 		htmltext(_('Invalid username or password'))
-		self.loginForm(self.request, render=1)
+		self.loginForm(render=1)
 		'.</p>'
 
 
@@ -69,7 +69,7 @@
 		self.request = get_request()
 
 		header(self._q_desc)
-		res = self.loginForm(self.request)
+		res = self.loginForm()
 
 		if type(res) != types.TupleType:
 			res



From santiago at mail.berlios.de  Mon Feb 26 22:13:39 2007
From: santiago at mail.berlios.de (santiago at BerliOS)
Date: Mon, 26 Feb 2007 22:13:39 +0100
Subject: [Destar-dev] r597 - trunk
Message-ID: <200702262113.l1QLDdrv025611@sheep.berlios.de>

Author: santiago
Date: 2007-02-26 22:13:39 +0100 (Mon, 26 Feb 2007)
New Revision: 597

Modified:
   trunk/CHANGELOG.txt
   trunk/cfg_dialout_normal.py
Log:
cfg_dialout_normal: adding r Dial option if no Authenticate() is used



Modified: trunk/CHANGELOG.txt
===================================================================
--- trunk/CHANGELOG.txt	2007-02-26 16:59:07 UTC (rev 596)
+++ trunk/CHANGELOG.txt	2007-02-26 21:13:39 UTC (rev 597)
@@ -1,5 +1,6 @@
 2007-02-26:
 * Fixed "cancel" option in page_login
+* cfg_dialout_normal: adding r Dial option if no Authenticate() is used
 
 2007-02-22:
 * Fixed statistics displaying

Modified: trunk/cfg_dialout_normal.py
===================================================================
--- trunk/cfg_dialout_normal.py	2007-02-26 16:59:07 UTC (rev 596)
+++ trunk/cfg_dialout_normal.py	2007-02-26 21:13:39 UTC (rev 597)
@@ -31,16 +31,51 @@
 					
 	def createVariables(self):
 		self.variables = [
-		VarType("name",   title=_("Name"), len=15),
-		VarType("pattern", title=_("Pattern"), len=55),
-		VarType("rmprefix", title=_("Remove Prefix of length"), len=10, default="0"),
-		VarType("addprefix", title=_("Add Prefix"), len=10, optional=True, default=""),
-		VarType("maxtime", title=_("Maximum call time in seconds"), type="int", len=15, default=6000),
-		VarType("ringtime", title=_("Ringing time in seconds"), type="int", len=15, default=300),
-		VarType("qlookup", title=_("Search on quick dial list?"), type="bool"),
+		VarType("name",   
+			title=_("Name"), 
+			len=15),
 
-		VarType("dis_transfer", title=_("Disallow calling user transfer?"), type="bool"),
-		VarType("Trunks", title=_("Trunks to use for routing this dialout entry"), type="label", len=15, hide=True)
+		VarType("pattern", 
+			title=_("Pattern"), 
+			len=55),
+
+		VarType("rmprefix", 
+			title=_("Remove Prefix of length"), 
+			len=10, 
+			default="0"),
+
+		VarType("addprefix", 
+			title=_("Add Prefix"), 
+			len=10, 
+			optional=True, 
+			default=""),
+
+		VarType("maxtime", 
+			title=_("Maximum call time in seconds"), 
+			type="int", 
+			len=15, 
+			default=6000),
+
+		VarType("ringtime", 
+			title=_("Ringing time in seconds"), 
+			type="int", 
+			len=15, 
+			default=30),
+
+		VarType("qlookup", 
+			title=_("Search on quick dial list?"), 
+			type="bool"),
+
+		VarType("dis_transfer", 
+			title=_("Disable transfer to the calling party?"), 
+			type="bool", 
+			default=False),
+
+		VarType("Trunks", 
+			title=_("Trunks to use for routing this dialout entry"), 
+			type="label", 
+			len=15, 
+			hide=True)
 		]
 
 		Cfg.fixup(self)
@@ -88,18 +123,20 @@
 		else:
 		       opts="TtW"
 		if self.qlookup:
+			c.appendExten("s",'SetVar(options=%sr)' % opts)
 			c.appendExten("s","Set(dest=${DB(QUICKDIALLIST/GLOBAL/${ARG1})})",e="Goto(3)")
 			c.appendExten("s",'Set(ARG1=${dest})')
-			c.appendExten("s","GotoIf($[${ARG2} = n]?5:4)")
+			c.appendExten("s","GotoIf($[${ARG2} = n]?6:5)")
 			c.appendExten("s","Authenticate(${ARG2})")
-			c.appendExten("s","GotoIf($[${ARG3} = 0]?6:9)")
+			c.appendExten("s","GotoIf($[${ARG3} = 0]?7:10)")
 			c.appendExten("s",'Set(timeout=0)')
 			c.appendExten("s",'Set(options=%s)' % opts)
 			c.appendExten("s",'Goto(11)')
 		else:
-			c.appendExten("s","GotoIf($[${ARG2} = n]?3:2)")
+			c.appendExten("s",'SetVar(options=%sr)' % opts)
+			c.appendExten("s","GotoIf($[${ARG2} = n]?4:3)")
 			c.appendExten("s","Authenticate(${ARG2})")
-			c.appendExten("s","GotoIf($[${ARG3} = 0]?4:7)")
+			c.appendExten("s","GotoIf($[${ARG3} = 0]?5:8)")
 			c.appendExten("s",'Set(timeout=0)')
 			c.appendExten("s",'Set(options=%s)' % opts)
 			c.appendExten("s",'Goto(9)')



From santiago at mail.berlios.de  Mon Feb 26 23:29:05 2007
From: santiago at mail.berlios.de (santiago at BerliOS)
Date: Mon, 26 Feb 2007 23:29:05 +0100
Subject: [Destar-dev] r598 - trunk
Message-ID: <200702262229.l1QMT5v3031177@sheep.berlios.de>

Author: santiago
Date: 2007-02-26 23:29:04 +0100 (Mon, 26 Feb 2007)
New Revision: 598

Modified:
   trunk/CHANGELOG.txt
   trunk/backend.py
Log:
* Added r Dial option for macro-dial-std-exten



Modified: trunk/CHANGELOG.txt
===================================================================
--- trunk/CHANGELOG.txt	2007-02-26 21:13:39 UTC (rev 597)
+++ trunk/CHANGELOG.txt	2007-02-26 22:29:04 UTC (rev 598)
@@ -1,6 +1,7 @@
 2007-02-26:
 * Fixed "cancel" option in page_login
 * cfg_dialout_normal: adding r Dial option if no Authenticate() is used
+* Added r Dial option for macro-dial-std-exten
 
 2007-02-22:
 * Fixed statistics displaying

Modified: trunk/backend.py
===================================================================
--- trunk/backend.py	2007-02-26 21:13:39 UTC (rev 597)
+++ trunk/backend.py	2007-02-26 22:29:04 UTC (rev 598)
@@ -223,7 +223,7 @@
                 c.append("exten=s,n,UserEvent(TAPI|TAPIEVENT: LINE_CALLSTATE LINECALLSTATE_OFFERING)")
                 c.append("exten=s,n,UserEvent(TAPI|TAPIEVENT: SET CALLERID ${CALLERID})")
                 c.append("exten=s,n,UserEvent(TAPI|TAPIEVENT: LINE_CALLINFO LINECALLINFOSTATE_CALLERID)")
-	c.append("exten=s,n(MainDial),Dial(${ARG1}${prng},${dsec},TtWw${dopt})")
+	c.append("exten=s,n(MainDial),Dial(${ARG1}${prng},${dsec},TtWwr${dopt})")
 	c.append(";")
 	c.append("; Dial result was 'timeout'")
 	c.append("exten=s,n(dialtimeout),Set(fw_ext=${DB(CFTO/${ARG4}/${ARG3})})")



From santiago at mail.berlios.de  Tue Feb 27 00:04:23 2007
From: santiago at mail.berlios.de (santiago at BerliOS)
Date: Tue, 27 Feb 2007 00:04:23 +0100
Subject: [Destar-dev] r599 - branches/0.2.X
Message-ID: <200702262304.l1QN4NdN002447@sheep.berlios.de>

Author: santiago
Date: 2007-02-27 00:04:22 +0100 (Tue, 27 Feb 2007)
New Revision: 599

Modified:
   branches/0.2.X/CHANGELOG.txt
   branches/0.2.X/cfg_dialout_normal.py
Log:
* cfg_dialout_normal: adding r Dial option if no Authenticate() is used



Modified: branches/0.2.X/CHANGELOG.txt
===================================================================
--- branches/0.2.X/CHANGELOG.txt	2007-02-26 22:29:04 UTC (rev 598)
+++ branches/0.2.X/CHANGELOG.txt	2007-02-26 23:04:22 UTC (rev 599)
@@ -1,3 +1,6 @@
+2007-02-26:
+* cfg_dialout_normal: adding r Dial option if no Authenticate() is used
+
 2007-01-21:
 * added tapi support
 * Releasing and taging 0.2.2 version

Modified: branches/0.2.X/cfg_dialout_normal.py
===================================================================
--- branches/0.2.X/cfg_dialout_normal.py	2007-02-26 22:29:04 UTC (rev 598)
+++ branches/0.2.X/cfg_dialout_normal.py	2007-02-26 23:04:22 UTC (rev 599)
@@ -31,16 +31,51 @@
 					
 	def createVariables(self):
 		self.variables = [
-		VarType("name",   title=_("Name"), len=15),
-		VarType("pattern", title=_("Pattern"), len=55),
-		VarType("rmprefix", title=_("Remove Prefix of length"), len=10, default="0"),
-		VarType("addprefix", title=_("Add Prefix"), len=10, optional=True, default=""),
-		VarType("maxtime", title=_("Maximum call time in seconds"), type="int", len=15, default=6000),
-		VarType("ringtime", title=_("Ringing time in seconds"), type="int", len=15, default=300),
-		VarType("qlookup", title=_("Search on quick dial list?"), type="bool"),
+		VarType("name",   
+			title=_("Name"), 
+			len=15),
 
-		VarType("dis_transfer", title=_("Disallow calling user transfer?"), type="bool"),
-		VarType("Trunks", title=_("Trunks to use for routing this dialout entry"), type="label", len=15, hide=True)
+		VarType("pattern", 
+			title=_("Pattern"), 
+			len=55),
+
+		VarType("rmprefix", 
+			title=_("Remove Prefix of length"), 
+			len=10, 
+			default="0"),
+
+		VarType("addprefix", 
+			title=_("Add Prefix"), 
+			len=10, 
+			optional=True, 
+			default=""),
+
+		VarType("maxtime", 
+			title=_("Maximum call time in seconds"), 
+			type="int", 
+			len=15, 
+			default=6000),
+
+		VarType("ringtime", 
+			title=_("Ringing time in seconds"), 
+			type="int", 
+			len=15, 
+			default=30),
+
+		VarType("qlookup", 
+			title=_("Search on quick dial list?"), 
+			type="bool"),
+
+		VarType("dis_transfer", 
+			title=_("Disable transfer to the calling party?"), 
+			type="bool", 
+			default=False),
+
+		VarType("Trunks", 
+			title=_("Trunks to use for routing this dialout entry"), 
+			type="label", 
+			len=15, 
+			hide=True)
 		]
 
 		Cfg.fixup(self)
@@ -88,18 +123,20 @@
 		else:
 		       opts="TtW"
 		if self.qlookup:
+			c.appendExten("s",'SetVar(options=%sr)' % opts)
 			c.appendExten("s","Set(dest=${DB(QUICKDIALLIST/GLOBAL/${ARG1})})",e="Goto(3)")
 			c.appendExten("s",'Set(ARG1=${dest})')
-			c.appendExten("s","GotoIf($[${ARG2} = n]?5:4)")
+			c.appendExten("s","GotoIf($[${ARG2} = n]?6:5)")
 			c.appendExten("s","Authenticate(${ARG2})")
-			c.appendExten("s","GotoIf($[${ARG3} = 0]?6:9)")
+			c.appendExten("s","GotoIf($[${ARG3} = 0]?7:10)")
 			c.appendExten("s",'Set(timeout=0)')
 			c.appendExten("s",'Set(options=%s)' % opts)
 			c.appendExten("s",'Goto(11)')
 		else:
-			c.appendExten("s","GotoIf($[${ARG2} = n]?3:2)")
+			c.appendExten("s",'SetVar(options=%sr)' % opts)
+			c.appendExten("s","GotoIf($[${ARG2} = n]?4:3)")
 			c.appendExten("s","Authenticate(${ARG2})")
-			c.appendExten("s","GotoIf($[${ARG3} = 0]?4:7)")
+			c.appendExten("s","GotoIf($[${ARG3} = 0]?5:8)")
 			c.appendExten("s",'Set(timeout=0)')
 			c.appendExten("s",'Set(options=%s)' % opts)
 			c.appendExten("s",'Goto(9)')



From admin at berlios.de  Tue Feb 27 21:00:27 2007
From: admin at berlios.de (admin at berlios.de)
Date: Tue, 27 Feb 2007 15:00:27 -0500 (COT)
Subject: [Destar-dev] [Bug #10513] Not updated/deleted dependencies
Message-ID: <200702272000.l1RK0RCc020664@unicorn.berlios.de>

Bug #10513, was updated on 2007-Feb-27 15:00
Here is a current snapshot of the bug.

Project: DeStar
Category: None
Status: Open
Resolution: None
Bug Group: None
Priority: 6
Submitted by: dasenjo
Assigned to : none
Summary: Not updated/deleted dependencies

Details: When is created an IVR that depends on a MOH conf. object, if the IVR is deleted before the MOH object, it is needed to get a warning an do a "cascade deleting" of the non existent IVR object cause DeStar thinks that still depends on the MOH.

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=10513&group_id=2112


From santiago at mail.berlios.de  Wed Feb 28 05:45:41 2007
From: santiago at mail.berlios.de (santiago at BerliOS)
Date: Wed, 28 Feb 2007 05:45:41 +0100
Subject: [Destar-dev] r600 - trunk
Message-ID: <200702280445.l1S4jfCh021028@sheep.berlios.de>

Author: santiago
Date: 2007-02-28 05:45:39 +0100 (Wed, 28 Feb 2007)
New Revision: 600

Modified:
   trunk/CHANGELOG.txt
   trunk/language.py
Log:
* languages.py: installing the gettext classes using unicode



Modified: trunk/CHANGELOG.txt
===================================================================
--- trunk/CHANGELOG.txt	2007-02-26 23:04:22 UTC (rev 599)
+++ trunk/CHANGELOG.txt	2007-02-28 04:45:39 UTC (rev 600)
@@ -1,3 +1,6 @@
+2007-02-27:
+* languages.py: installing the gettext classes using unicode
+
 2007-02-26:
 * Fixed "cancel" option in page_login
 * cfg_dialout_normal: adding r Dial option if no Authenticate() is used

Modified: trunk/language.py
===================================================================
--- trunk/language.py	2007-02-26 23:04:22 UTC (rev 599)
+++ trunk/language.py	2007-02-28 04:45:39 UTC (rev 600)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 #
@@ -47,7 +47,7 @@
 			translation = gettext.translation('destar',localesdir,languages=[lang])
 	except IOError:
 		translation = gettext.NullTranslations()
-	translation.install()
+	translation.install(unicode=True)
 
 def desactivateGettext():
 	global _



From santiago at mail.berlios.de  Wed Feb 28 06:07:07 2007
From: santiago at mail.berlios.de (santiago at BerliOS)
Date: Wed, 28 Feb 2007 06:07:07 +0100
Subject: [Destar-dev] r601 - trunk
Message-ID: <200702280507.l1S5779r021909@sheep.berlios.de>

Author: santiago
Date: 2007-02-28 06:07:04 +0100 (Wed, 28 Feb 2007)
New Revision: 601

Modified:
   trunk/BACKEND.txt
   trunk/CHANGELOG.txt
   trunk/ConfigHelper.ptl
   trunk/Publisher.py
   trunk/StatsHelper.ptl
   trunk/Templates.ptl
   trunk/backend.py
   trunk/cdrutils.py
   trunk/cfg_app_callfw.py
   trunk/cfg_app_chanspy.py
   trunk/cfg_app_conference.py
   trunk/cfg_app_directory.py
   trunk/cfg_app_disa.py
   trunk/cfg_app_dnd.py
   trunk/cfg_app_echo.py
   trunk/cfg_app_meetme.py
   trunk/cfg_app_milliwatt.py
   trunk/cfg_app_music.py
   trunk/cfg_app_parking.py
   trunk/cfg_app_play.py
   trunk/cfg_app_quickdial_global.py
   trunk/cfg_app_quickdial_phone.py
   trunk/cfg_app_record.py
   trunk/cfg_app_saytime.py
   trunk/cfg_app_voicemail.py
   trunk/cfg_app_voicemailsettings.py
   trunk/cfg_dialout_normal.py
   trunk/cfg_ivr_autoatt.py
   trunk/cfg_ivr_raw.py
   trunk/cfg_opt_codec.py
   trunk/cfg_opt_enum.py
   trunk/cfg_opt_iax.py
   trunk/cfg_opt_loadmodule.py
   trunk/cfg_opt_logger.py
   trunk/cfg_opt_manager.py
   trunk/cfg_opt_monitor.py
   trunk/cfg_opt_music.py
   trunk/cfg_opt_oppanel.py
   trunk/cfg_opt_pbx.py
   trunk/cfg_opt_pickup.py
   trunk/cfg_opt_rawcfg.py
   trunk/cfg_opt_rtp.py
   trunk/cfg_opt_settings.py
   trunk/cfg_opt_sip_network.py
   trunk/cfg_opt_transfer.py
   trunk/cfg_opt_user.py
   trunk/cfg_opt_voicemail.py
   trunk/cfg_opt_zap_audio.py
   trunk/cfg_opt_zap_phone.py
   trunk/cfg_opt_zap_trunk.py
   trunk/cfg_opt_zappri.py
   trunk/cfg_phone_epygi.py
   trunk/cfg_phone_ext.py
   trunk/cfg_phone_iax.py
   trunk/cfg_phone_mgcp.py
   trunk/cfg_phone_queue.py
   trunk/cfg_phone_sip.py
   trunk/cfg_phone_zap.py
   trunk/cfg_trunk_capi.py
   trunk/cfg_trunk_capimsn.py
   trunk/cfg_trunk_fwdiax.py
   trunk/cfg_trunk_iax.py
   trunk/cfg_trunk_iaxtel.py
   trunk/cfg_trunk_sip.py
   trunk/cfg_trunk_zap.py
   trunk/cfg_trunk_zaphfc.py
   trunk/cfg_trunk_zappbx.py
   trunk/cfg_trunk_zappri.py
   trunk/configlets.py
   trunk/destar
   trunk/docs.py
   trunk/manager.py
   trunk/page_admin.ptl
   trunk/page_admin_backup.ptl
   trunk/page_admin_panel.ptl
   trunk/page_admin_pbxstate.ptl
   trunk/page_admin_reload.ptl
   trunk/page_admin_viewconf.ptl
   trunk/page_config.ptl
   trunk/page_config_add.ptl
   trunk/page_config_applications.ptl
   trunk/page_config_codecs.ptl
   trunk/page_config_dialout.ptl
   trunk/page_config_dids.ptl
   trunk/page_config_down.ptl
   trunk/page_config_edit.ptl
   trunk/page_config_ivrs.ptl
   trunk/page_config_options.ptl
   trunk/page_config_pbx.ptl
   trunk/page_config_phones.ptl
   trunk/page_config_trunks.ptl
   trunk/page_config_up.ptl
   trunk/page_config_users.ptl
   trunk/page_debug.ptl
   trunk/page_debug_values.ptl
   trunk/page_login.ptl
   trunk/page_logout.ptl
   trunk/page_main.ptl
   trunk/page_owner.ptl
   trunk/page_owner_cdr.ptl
   trunk/page_stats.ptl
   trunk/page_stats_calls.ptl
   trunk/page_stats_dialouts.ptl
   trunk/page_stats_phone.ptl
   trunk/page_stats_trunks.ptl
   trunk/page_user.ptl
   trunk/page_user_info.ptl
   trunk/page_user_quickdiallist.ptl
   trunk/page_user_settings.ptl
   trunk/page_user_state.ptl
   trunk/panelutils.py
   trunk/session.py
   trunk/tests.py
Log:
the "iso-latin-1" doesn't exist, there were some problems with the accents in some names,
whe Spanish of French was used, destar displayed ?\195?\131?\194?\179, ?\195?\131?\194?\169, and other strange characters, ...

so I decied to move to utf-8, everybody should use unicode and unify the file's charset.



Modified: trunk/BACKEND.txt
===================================================================
--- trunk/BACKEND.txt	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/BACKEND.txt	2007-02-28 05:07:04 UTC (rev 601)
@@ -101,7 +101,7 @@
 
 Now look at cfg_opt_rtp.py. You'll see:
 
-  # -*- coding: iso-latin-1 -*-
+  # -*- coding: utf-8 -*-
 
   from configlets import *
   from language import _

Modified: trunk/CHANGELOG.txt
===================================================================
--- trunk/CHANGELOG.txt	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/CHANGELOG.txt	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,5 +1,6 @@
 2007-02-27:
 * languages.py: installing the gettext classes using unicode
+* changing the file's encoding to utf-8, everybody should use unicode.
 
 2007-02-26:
 * Fixed "cancel" option in page_login

Modified: trunk/ConfigHelper.ptl
===================================================================
--- trunk/ConfigHelper.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/ConfigHelper.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/Publisher.py
===================================================================
--- trunk/Publisher.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/Publisher.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 #

Modified: trunk/StatsHelper.ptl
===================================================================
--- trunk/StatsHelper.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/StatsHelper.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,6 +1,6 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
-# Copyright (C) 2005 Manuel Alejandro Cer?n Estrada <ceronman at gmail.com>
+# Copyright (C) 2005 Manuel Alejandro Cer??n Estrada <ceronman at gmail.com>
 # 
 # This program is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by

Modified: trunk/Templates.ptl
===================================================================
--- trunk/Templates.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/Templates.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 
@@ -159,7 +159,7 @@
    	if refresh:
    		'<meta http-equiv="Refresh" content="%d;" />\n' % refresh
   	'<title>Asterisk/DeStar PBX :: %s</title>\n' % _(str(title))
-  	'<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />\n'
+  	'<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n'
   	'<style type="text/css" media="screen, tv, projection">\n'
   	'	@import url("/static/css/general.css");\n' 
   	'	@import url("/static/css/Menu.css");\n'

Modified: trunk/backend.py
===================================================================
--- trunk/backend.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/backend.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig, some addons by Michael Bielicki, TAAN Softworks Corp.
 #
@@ -94,7 +94,7 @@
 	if f is None:
 		f = open(os.path.join(configlets.CONF_DIR,DESTAR_CFG),"w")
 
-	f.write("# -*- coding: iso-latin-1 -*-\n")
+	f.write("# -*- coding: utf-8 -*-\n")
 	f.write("# You should execfile() this config\n\n")
 	for c in configlets.configlet_tree:
 		a = c.createPythonConfig()

Modified: trunk/cdrutils.py
===================================================================
--- trunk/cdrutils.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cdrutils.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 #

Modified: trunk/cfg_app_callfw.py
===================================================================
--- trunk/cfg_app_callfw.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_app_callfw.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Destar has Copyright (C) 2005 by Holger Schurig
 # This file has Copyright (C) 2005 by Alejandro Rios

Modified: trunk/cfg_app_chanspy.py
===================================================================
--- trunk/cfg_app_chanspy.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_app_chanspy.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2006 by Diego Andr??s Asenjo G.
 #

Modified: trunk/cfg_app_conference.py
===================================================================
--- trunk/cfg_app_conference.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_app_conference.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_app_directory.py
===================================================================
--- trunk/cfg_app_directory.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_app_directory.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_app_disa.py
===================================================================
--- trunk/cfg_app_disa.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_app_disa.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Destar has Copyright (C) 2005 by Holger Schurig
 # This file has Copyright (C) 2007 by Ian Sper 

Modified: trunk/cfg_app_dnd.py
===================================================================
--- trunk/cfg_app_dnd.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_app_dnd.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Destar has Copyright (C) 2005 by Holger Schurig
 # This file has Copyright (C) 2005 by Alejandro Rios

Modified: trunk/cfg_app_echo.py
===================================================================
--- trunk/cfg_app_echo.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_app_echo.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_app_meetme.py
===================================================================
--- trunk/cfg_app_meetme.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_app_meetme.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_app_milliwatt.py
===================================================================
--- trunk/cfg_app_milliwatt.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_app_milliwatt.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_app_music.py
===================================================================
--- trunk/cfg_app_music.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_app_music.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 #

Modified: trunk/cfg_app_parking.py
===================================================================
--- trunk/cfg_app_parking.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_app_parking.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_app_play.py
===================================================================
--- trunk/cfg_app_play.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_app_play.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_app_quickdial_global.py
===================================================================
--- trunk/cfg_app_quickdial_global.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_app_quickdial_global.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Destar has Copyright (C) 2005 by Holger Schurig
 # This file has Copyright (C) 2005 by Alejandro Rios

Modified: trunk/cfg_app_quickdial_phone.py
===================================================================
--- trunk/cfg_app_quickdial_phone.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_app_quickdial_phone.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Destar has Copyright (C) 2005 by Holger Schurig
 # This file has Copyright (C) 2005 by Alejandro Rios

Modified: trunk/cfg_app_record.py
===================================================================
--- trunk/cfg_app_record.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_app_record.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_app_saytime.py
===================================================================
--- trunk/cfg_app_saytime.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_app_saytime.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_app_voicemail.py
===================================================================
--- trunk/cfg_app_voicemail.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_app_voicemail.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_app_voicemailsettings.py
===================================================================
--- trunk/cfg_app_voicemailsettings.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_app_voicemailsettings.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Destar has Copyright (C) 2005 by Holger Schurig
 # This file has Copyright (C) 2005 by Alejandro Rios

Modified: trunk/cfg_dialout_normal.py
===================================================================
--- trunk/cfg_dialout_normal.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_dialout_normal.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # This module is Copyright (C) 2005 by Alejandro Rios
 # Destar is Copyright (C) 2005 by Holger Schurig

Modified: trunk/cfg_ivr_autoatt.py
===================================================================
--- trunk/cfg_ivr_autoatt.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_ivr_autoatt.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # This modules is Copyright (C) 2005 by Alejandro Rios,
 # Destar is Copyright (C) 2005 by Holger Schurig,

Modified: trunk/cfg_ivr_raw.py
===================================================================
--- trunk/cfg_ivr_raw.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_ivr_raw.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Destar has Copyright (C) 2005 by Holger Schurig
 # this file has Copyright (C) 2005 by Alejandro Rios P.

Modified: trunk/cfg_opt_codec.py
===================================================================
--- trunk/cfg_opt_codec.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_codec.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # This module is Copyright (C) 2005 by Alejandro Rios,
 # Destar is Copyright (C) 2005 by Holger Schurig,

Modified: trunk/cfg_opt_enum.py
===================================================================
--- trunk/cfg_opt_enum.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_enum.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_opt_iax.py
===================================================================
--- trunk/cfg_opt_iax.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_iax.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # This module is Copyright (C) 2007 by dasenjo,
 # Destar is Copyright (C) 2005 by Holger Schurig,

Modified: trunk/cfg_opt_loadmodule.py
===================================================================
--- trunk/cfg_opt_loadmodule.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_loadmodule.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_opt_logger.py
===================================================================
--- trunk/cfg_opt_logger.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_logger.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_opt_manager.py
===================================================================
--- trunk/cfg_opt_manager.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_manager.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_opt_monitor.py
===================================================================
--- trunk/cfg_opt_monitor.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_monitor.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Destar has Copyright (C) 2005 by Holger Schurig
 # This file has Copyright (C) 2005 by Alejandro Rios

Modified: trunk/cfg_opt_music.py
===================================================================
--- trunk/cfg_opt_music.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_music.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_opt_oppanel.py
===================================================================
--- trunk/cfg_opt_oppanel.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_oppanel.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Destar has Copyright (C) 2005 by Holger Schurig
 # This file has Copyright (C) 2005 by Alejandro Rios

Modified: trunk/cfg_opt_pbx.py
===================================================================
--- trunk/cfg_opt_pbx.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_pbx.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # This modules is Copyright (C) 2005 by Alejandro Rios,
 # Destar is Copyright (C) 2005 by Holger Schurig,

Modified: trunk/cfg_opt_pickup.py
===================================================================
--- trunk/cfg_opt_pickup.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_pickup.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Destar has Copyright (C) 2005 by Holger Schurig
 # This file has Copyright (C) 2005 by Alejandro Rios

Modified: trunk/cfg_opt_rawcfg.py
===================================================================
--- trunk/cfg_opt_rawcfg.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_rawcfg.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_opt_rtp.py
===================================================================
--- trunk/cfg_opt_rtp.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_rtp.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_opt_settings.py
===================================================================
--- trunk/cfg_opt_settings.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_settings.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_opt_sip_network.py
===================================================================
--- trunk/cfg_opt_sip_network.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_sip_network.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # This module is Copyright (C) 2005 by Francesco Crescioli,
 # Heavly based on module cfg_opt_sip_audio Copyright (C) 2005 by Alejandro Rios,

Modified: trunk/cfg_opt_transfer.py
===================================================================
--- trunk/cfg_opt_transfer.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_transfer.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Destar has Copyright (C) 2005 by Holger Schurig
 # This file has Copyright (C) 2005 by Alejandro Rios

Modified: trunk/cfg_opt_user.py
===================================================================
--- trunk/cfg_opt_user.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_user.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_opt_voicemail.py
===================================================================
--- trunk/cfg_opt_voicemail.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_voicemail.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_opt_zap_audio.py
===================================================================
--- trunk/cfg_opt_zap_audio.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_zap_audio.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig,
 # 

Modified: trunk/cfg_opt_zap_phone.py
===================================================================
--- trunk/cfg_opt_zap_phone.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_zap_phone.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig,
 # 

Modified: trunk/cfg_opt_zap_trunk.py
===================================================================
--- trunk/cfg_opt_zap_trunk.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_zap_trunk.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig,
 # 

Modified: trunk/cfg_opt_zappri.py
===================================================================
--- trunk/cfg_opt_zappri.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_opt_zappri.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Destar has Copyright (C) 2005 by Holger Schurig
 # This file has Copyright (C) 2005 by Alejandro Rios P.

Modified: trunk/cfg_phone_epygi.py
===================================================================
--- trunk/cfg_phone_epygi.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_phone_epygi.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # This file has Copyright by Alejandro Rios P.
 # Destar has Copyright (C) 2005 by Holger Schurig,

Modified: trunk/cfg_phone_ext.py
===================================================================
--- trunk/cfg_phone_ext.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_phone_ext.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_phone_iax.py
===================================================================
--- trunk/cfg_phone_iax.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_phone_iax.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_phone_mgcp.py
===================================================================
--- trunk/cfg_phone_mgcp.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_phone_mgcp.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2004 by Michael Bielicki, TAAN Softworks Corp.
 # Based on work by Holger Schurig

Modified: trunk/cfg_phone_queue.py
===================================================================
--- trunk/cfg_phone_queue.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_phone_queue.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Destar has Copyright (C) 2005 by Holger Schurig,
 # This file has Copyright (C) 2005 by Alejandro Rios P.

Modified: trunk/cfg_phone_sip.py
===================================================================
--- trunk/cfg_phone_sip.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_phone_sip.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig,
 # add ons by Michael Bielicki, TAAN Softworks Corp.

Modified: trunk/cfg_phone_zap.py
===================================================================
--- trunk/cfg_phone_zap.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_phone_zap.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig,
 # 

Modified: trunk/cfg_trunk_capi.py
===================================================================
--- trunk/cfg_trunk_capi.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_trunk_capi.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_trunk_capimsn.py
===================================================================
--- trunk/cfg_trunk_capimsn.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_trunk_capimsn.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_trunk_fwdiax.py
===================================================================
--- trunk/cfg_trunk_fwdiax.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_trunk_fwdiax.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_trunk_iax.py
===================================================================
--- trunk/cfg_trunk_iax.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_trunk_iax.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 # Copyright (C) 2004 Michael Bielicki
 # based on Free World Dialup Module by Hoger Schurig
 # 

Modified: trunk/cfg_trunk_iaxtel.py
===================================================================
--- trunk/cfg_trunk_iaxtel.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_trunk_iaxtel.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 # Copyright (C) 2004 Michael Bielicki
 # based on Free World Dialup Module by Hoger Schurig
 # 

Modified: trunk/cfg_trunk_sip.py
===================================================================
--- trunk/cfg_trunk_sip.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_trunk_sip.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 # Copyright (C) 2004 Michael Bielicki
 # based on Free World Dialup Module by Hoger Schurig
 # 

Modified: trunk/cfg_trunk_zap.py
===================================================================
--- trunk/cfg_trunk_zap.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_trunk_zap.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_trunk_zaphfc.py
===================================================================
--- trunk/cfg_trunk_zaphfc.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_trunk_zaphfc.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_trunk_zappbx.py
===================================================================
--- trunk/cfg_trunk_zappbx.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_trunk_zappbx.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/cfg_trunk_zappri.py
===================================================================
--- trunk/cfg_trunk_zappri.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/cfg_trunk_zappri.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Destar has Copyright (C) 2005 by Holger Schurig
 # This file has Copyright (C) 2005 by Alejandro Rios P.

Modified: trunk/configlets.py
===================================================================
--- trunk/configlets.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/configlets.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 #

Modified: trunk/destar
===================================================================
--- trunk/destar	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/destar	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,5 +1,5 @@
 #!/usr/bin/env python
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 #

Modified: trunk/docs.py
===================================================================
--- trunk/docs.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/docs.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,6 +1,6 @@
 #!/usr/bin/env python
 
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2006 by Alejandro Rios P.
 #

Modified: trunk/manager.py
===================================================================
--- trunk/manager.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/manager.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 #

Modified: trunk/page_admin.ptl
===================================================================
--- trunk/page_admin.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_admin.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_admin_backup.ptl
===================================================================
--- trunk/page_admin_backup.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_admin_backup.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_admin_panel.ptl
===================================================================
--- trunk/page_admin_panel.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_admin_panel.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_admin_pbxstate.ptl
===================================================================
--- trunk/page_admin_pbxstate.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_admin_pbxstate.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_admin_reload.ptl
===================================================================
--- trunk/page_admin_reload.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_admin_reload.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_admin_viewconf.ptl
===================================================================
--- trunk/page_admin_viewconf.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_admin_viewconf.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_config.ptl
===================================================================
--- trunk/page_config.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_config.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_config_add.ptl
===================================================================
--- trunk/page_config_add.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_config_add.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_config_applications.ptl
===================================================================
--- trunk/page_config_applications.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_config_applications.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_config_codecs.ptl
===================================================================
--- trunk/page_config_codecs.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_config_codecs.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # This file is Copyright (C) 2006 by Alejandro Rios P.,, 
 # Destar has Copyright (C) 2003-2006 by Holger Schurig

Modified: trunk/page_config_dialout.ptl
===================================================================
--- trunk/page_config_dialout.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_config_dialout.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # This module is Copyright (C) 2005 by Alejandro Rios
 # Destar is Copyright (C) 2005 by Holger Schurig

Modified: trunk/page_config_dids.ptl
===================================================================
--- trunk/page_config_dids.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_config_dids.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # This file is Copyright (C) 2006 by Alejandro Rios P.,, 
 # Destar has Copyright (C) 2003-2006 by Holger Schurig

Modified: trunk/page_config_down.ptl
===================================================================
--- trunk/page_config_down.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_config_down.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_config_edit.ptl
===================================================================
--- trunk/page_config_edit.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_config_edit.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_config_ivrs.ptl
===================================================================
--- trunk/page_config_ivrs.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_config_ivrs.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,6 +1,6 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
-# This file is Copyright (C) 2005 by Santiago Ruano Rinc?n, 
+# This file is Copyright (C) 2005 by Santiago Ruano Rinc??n, 
 # Copyright (C) 2005 by Holger Schurig
 # 
 # This program is free software; you can redistribute it and/or modify

Modified: trunk/page_config_options.ptl
===================================================================
--- trunk/page_config_options.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_config_options.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_config_pbx.ptl
===================================================================
--- trunk/page_config_pbx.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_config_pbx.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,6 +1,6 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
-# This file is Copyright (C) 2005 by Santiago Ruano Rinc?n, 
+# This file is Copyright (C) 2005 by Santiago Ruano Rinc??n, 
 # Copyright (C) 2005 by Holger Schurig
 # 
 # This program is free software; you can redistribute it and/or modify

Modified: trunk/page_config_phones.ptl
===================================================================
--- trunk/page_config_phones.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_config_phones.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_config_trunks.ptl
===================================================================
--- trunk/page_config_trunks.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_config_trunks.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_config_up.ptl
===================================================================
--- trunk/page_config_up.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_config_up.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_config_users.ptl
===================================================================
--- trunk/page_config_users.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_config_users.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_debug.ptl
===================================================================
--- trunk/page_debug.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_debug.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_debug_values.ptl
===================================================================
--- trunk/page_debug_values.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_debug_values.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_login.ptl
===================================================================
--- trunk/page_login.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_login.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_logout.ptl
===================================================================
--- trunk/page_logout.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_logout.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_main.ptl
===================================================================
--- trunk/page_main.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_main.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_owner.ptl
===================================================================
--- trunk/page_owner.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_owner.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_owner_cdr.ptl
===================================================================
--- trunk/page_owner_cdr.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_owner_cdr.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 Holger Schurig
 # Copyright (C) 2005 Manuel Alejandro Cer??n Estrada <ceronman at gmail.com>

Modified: trunk/page_stats.ptl
===================================================================
--- trunk/page_stats.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_stats.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_stats_calls.ptl
===================================================================
--- trunk/page_stats_calls.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_stats_calls.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,6 +1,6 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
-# Copyright (C) 2005 Manuel Alejandro Cer?n Estrada <ceronman at gmail.com>
+# Copyright (C) 2005 Manuel Alejandro Cer??n Estrada <ceronman at gmail.com>
 # 
 # This program is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by

Modified: trunk/page_stats_dialouts.ptl
===================================================================
--- trunk/page_stats_dialouts.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_stats_dialouts.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 Manuel Alejandro Cer??n Estrada <ceronman at gmail.com>
 # 

Modified: trunk/page_stats_phone.ptl
===================================================================
--- trunk/page_stats_phone.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_stats_phone.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 Manuel Alejandro Cer??n Estrada <ceronman at gmail.com>
 # 

Modified: trunk/page_stats_trunks.ptl
===================================================================
--- trunk/page_stats_trunks.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_stats_trunks.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 Manuel Alejandro Cer??n Estrada <ceronman at gmail.com>
 # 

Modified: trunk/page_user.ptl
===================================================================
--- trunk/page_user.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_user.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_user_info.ptl
===================================================================
--- trunk/page_user_info.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_user_info.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_user_quickdiallist.ptl
===================================================================
--- trunk/page_user_quickdiallist.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_user_quickdiallist.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # This file has Copyright (C) 2005 by Alejandro Rios P.
 # DeStar has Copyright (C) 2005 by Holger Schurig

Modified: trunk/page_user_settings.ptl
===================================================================
--- trunk/page_user_settings.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_user_settings.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/page_user_state.ptl
===================================================================
--- trunk/page_user_state.ptl	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/page_user_state.ptl	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/panelutils.py
===================================================================
--- trunk/panelutils.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/panelutils.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2004 by Holger Schurig
 #

Modified: trunk/session.py
===================================================================
--- trunk/session.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/session.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2006 by Holger Schurig
 #

Modified: trunk/tests.py
===================================================================
--- trunk/tests.py	2007-02-28 04:45:39 UTC (rev 600)
+++ trunk/tests.py	2007-02-28 05:07:04 UTC (rev 601)
@@ -1,6 +1,6 @@
 #!/usr/bin/env python
 
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2006 by Anthony PIRON
 #



From santiago at mail.berlios.de  Wed Feb 28 06:17:50 2007
From: santiago at mail.berlios.de (santiago at BerliOS)
Date: Wed, 28 Feb 2007 06:17:50 +0100
Subject: [Destar-dev] r602 - in trunk/misc: . debian
Message-ID: <200702280517.l1S5HosG022402@sheep.berlios.de>

Author: santiago
Date: 2007-02-28 06:17:49 +0100 (Wed, 28 Feb 2007)
New Revision: 602

Modified:
   trunk/misc/Billing.ptl
   trunk/misc/cfg_app_phraserecording.py
   trunk/misc/cfg_opt_asterisk.py
   trunk/misc/debian/cfg_opt_networking.py
   trunk/misc/page_admin_billing.ptl
   trunk/misc/page_admin_systemstate.ptl
Log:
changing to utf-8 in some missing files



Modified: trunk/misc/Billing.ptl
===================================================================
--- trunk/misc/Billing.ptl	2007-02-28 05:07:04 UTC (rev 601)
+++ trunk/misc/Billing.ptl	2007-02-28 05:17:49 UTC (rev 602)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # This file has Copyright (C) 2006 Ian Esper <ian at bratech.com.br> 
 # Destar has Copyright (C) 2006 by Holger Schurig

Modified: trunk/misc/cfg_app_phraserecording.py
===================================================================
--- trunk/misc/cfg_app_phraserecording.py	2007-02-28 05:07:04 UTC (rev 601)
+++ trunk/misc/cfg_app_phraserecording.py	2007-02-28 05:17:49 UTC (rev 602)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/misc/cfg_opt_asterisk.py
===================================================================
--- trunk/misc/cfg_opt_asterisk.py	2007-02-28 05:07:04 UTC (rev 601)
+++ trunk/misc/cfg_opt_asterisk.py	2007-02-28 05:17:49 UTC (rev 602)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Holger Schurig
 # 

Modified: trunk/misc/debian/cfg_opt_networking.py
===================================================================
--- trunk/misc/debian/cfg_opt_networking.py	2007-02-28 05:07:04 UTC (rev 601)
+++ trunk/misc/debian/cfg_opt_networking.py	2007-02-28 05:17:49 UTC (rev 602)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 by Santiago Jos? Ruano Rinc?n
 # 

Modified: trunk/misc/page_admin_billing.ptl
===================================================================
--- trunk/misc/page_admin_billing.ptl	2007-02-28 05:07:04 UTC (rev 601)
+++ trunk/misc/page_admin_billing.ptl	2007-02-28 05:17:49 UTC (rev 602)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2005 Ian Esper 
 # based on file made by Manuel Alejandro Cer??n Estrada <ceronman at gmail.com>

Modified: trunk/misc/page_admin_systemstate.ptl
===================================================================
--- trunk/misc/page_admin_systemstate.ptl	2007-02-28 05:07:04 UTC (rev 601)
+++ trunk/misc/page_admin_systemstate.ptl	2007-02-28 05:17:49 UTC (rev 602)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # This file has Copyright (C) 2005 by Alejandro Rios P.
 # Destar has Copyright (C) 2005 by Holger Schurig



From imesper at mail.berlios.de  Wed Feb 28 15:13:00 2007
From: imesper at mail.berlios.de (imesper at BerliOS)
Date: Wed, 28 Feb 2007 15:13:00 +0100
Subject: [Destar-dev] r603 - trunk
Message-ID: <200702281413.l1SED0ND003904@sheep.berlios.de>

Author: imesper
Date: 2007-02-28 15:12:59 +0100 (Wed, 28 Feb 2007)
New Revision: 603

Modified:
   trunk/CHANGELOG.txt
   trunk/ConfigHelper.ptl
Log:
Removed backend.createAsteriskConfig() from __addit__ method, and added obj.createAsteriskConfig() and backend.createPythonConfig() on SaveConfig()

Modified: trunk/CHANGELOG.txt
===================================================================
--- trunk/CHANGELOG.txt	2007-02-28 05:17:49 UTC (rev 602)
+++ trunk/CHANGELOG.txt	2007-02-28 14:12:59 UTC (rev 603)
@@ -1,3 +1,7 @@
+2007-02-28:
+* ConfigHelper.ptl: Fix a problem in __addit__ method, when creating a new
+* object all createAsteriskConfig() from all objects where called.
+
 2007-02-27:
 * languages.py: installing the gettext classes using unicode
 * changing the file's encoding to utf-8, everybody should use unicode.

Modified: trunk/ConfigHelper.ptl
===================================================================
--- trunk/ConfigHelper.ptl	2007-02-28 05:17:49 UTC (rev 602)
+++ trunk/ConfigHelper.ptl	2007-02-28 14:12:59 UTC (rev 603)
@@ -107,7 +107,6 @@
 
 def __addit__(obj):
 	backend.addConfiglet(obj)
-	backend.createAsteriskConfig()
 
 def lookupConfiglets(request,component):
         if not component:
@@ -179,6 +178,8 @@
 				obj.renameDependencies(_v)
 		if withCallback and actionCallback:
 			actionCallback(obj)
+			obj.createAsteriskConfig()
+			backend.createPythonConfig()
 			
 
 	def checkConfig():



From dasenjo at mail.berlios.de  Wed Feb 28 15:51:39 2007
From: dasenjo at mail.berlios.de (dasenjo at BerliOS)
Date: Wed, 28 Feb 2007 15:51:39 +0100
Subject: [Destar-dev] r604 - trunk
Message-ID: <200702281451.l1SEpdsi012548@sheep.berlios.de>

Author: dasenjo
Date: 2007-02-28 15:51:34 +0100 (Wed, 28 Feb 2007)
New Revision: 604

Modified:
   trunk/CHANGELOG.txt
   trunk/cfg_ivr_autoatt.py
Log:
* Little name change to skip check in checkConfig() (for extensions to jump in an IVR)



Modified: trunk/CHANGELOG.txt
===================================================================
--- trunk/CHANGELOG.txt	2007-02-28 14:12:59 UTC (rev 603)
+++ trunk/CHANGELOG.txt	2007-02-28 14:51:34 UTC (rev 604)
@@ -1,6 +1,7 @@
 2007-02-28:
 * ConfigHelper.ptl: Fix a problem in __addit__ method, when creating a new
 * object all createAsteriskConfig() from all objects where called.
+* Little name change to skip check in checkConfig() (for extensions to jump in an IVR)
 
 2007-02-27:
 * languages.py: installing the gettext classes using unicode

Modified: trunk/cfg_ivr_autoatt.py
===================================================================
--- trunk/cfg_ivr_autoatt.py	2007-02-28 14:12:59 UTC (rev 603)
+++ trunk/cfg_ivr_autoatt.py	2007-02-28 14:51:34 UTC (rev 604)
@@ -77,7 +77,7 @@
 					title=_("Pause between each playback"),
 					optional=True,len=2),
 
-			VarType("ext",
+			VarType("exten",
 					title=_("Extension to ring after file playing"),
 					type="choice",
 					options=getChoice("CfgPhone")),
@@ -112,7 +112,7 @@
 			DepType("moh", 
 					type="hard",
 					message = _("This is a Dependency")),
-			DepType("ext", 
+			DepType("exten", 
 					type="hard",
 					message = _("This is a Dependency")),
 			DepType("pbx", 
@@ -164,11 +164,11 @@
 			s.appendExten("s","Background(ivr/%s)" % self.backgroundfile)	
 			if self.pause:
 				s.appendExten("s","WaitExten(%s)" % self.pause)
-		s.appendExten("s","Goto(%s,%s,1)" % (pbx,self.ext))	
+		s.appendExten("s","Goto(%s,%s,1)" % (pbx,self.exten))	
 		if self.operator:
-			s.appendExten("%s" % self.operator, "Goto(%s,%s,1)" % (pbx,self.ext))	
+			s.appendExten("%s" % self.operator, "Goto(%s,%s,1)" % (pbx,self.exten))	
 		s.appendExten("i","Playback(privacy-invalid)")	
-		s.appendExten("i","Goto(%s,%s,1)" % (pbx,self.ext))	
+		s.appendExten("i","Goto(%s,%s,1)" % (pbx,self.exten))	
 		s.appendExten("t","ResetCDR(w)")
 		s.appendExten("t","NoCDR")
 		s.appendExten("t","Hangup")



From santiago at mail.berlios.de  Wed Feb 28 19:10:46 2007
From: santiago at mail.berlios.de (santiago at BerliOS)
Date: Wed, 28 Feb 2007 19:10:46 +0100
Subject: [Destar-dev] r605 - in trunk: examples tests
Message-ID: <200702281810.l1SIAkZ3011613@sheep.berlios.de>

Author: santiago
Date: 2007-02-28 19:10:45 +0100 (Wed, 28 Feb 2007)
New Revision: 605

Modified:
   trunk/examples/destar_cfg.py
   trunk/tests/__init__.py
   trunk/tests/i18n.py
Log:
I don't know why these file weren't included in the previous commit



Modified: trunk/examples/destar_cfg.py
===================================================================
--- trunk/examples/destar_cfg.py	2007-02-28 14:51:34 UTC (rev 604)
+++ trunk/examples/destar_cfg.py	2007-02-28 18:10:45 UTC (rev 605)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 # You should execfile() this config
 
 CfgTrunkSiptrunk(

Modified: trunk/tests/__init__.py
===================================================================
--- trunk/tests/__init__.py	2007-02-28 14:51:34 UTC (rev 604)
+++ trunk/tests/__init__.py	2007-02-28 18:10:45 UTC (rev 605)
@@ -1,4 +1,4 @@
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2006 by Anthony PIRON
 #

Modified: trunk/tests/i18n.py
===================================================================
--- trunk/tests/i18n.py	2007-02-28 14:51:34 UTC (rev 604)
+++ trunk/tests/i18n.py	2007-02-28 18:10:45 UTC (rev 605)
@@ -1,6 +1,6 @@
 #!/usr/bin/env python
 
-# -*- coding: iso-latin-1 -*-
+# -*- coding: utf-8 -*-
 #
 # Copyright (C) 2006 by Anthony PIRON
 #



From santiago at mail.berlios.de  Wed Feb 28 19:50:42 2007
From: santiago at mail.berlios.de (santiago at BerliOS)
Date: Wed, 28 Feb 2007 19:50:42 +0100
Subject: [Destar-dev] r606 - trunk
Message-ID: <200702281850.l1SIogUP006067@sheep.berlios.de>

Author: santiago
Date: 2007-02-28 19:50:40 +0100 (Wed, 28 Feb 2007)
New Revision: 606

Modified:
   trunk/CHANGELOG.txt
   trunk/cfg_dialout_normal.py
Log:
* Better dialout's macros handling



Modified: trunk/CHANGELOG.txt
===================================================================
--- trunk/CHANGELOG.txt	2007-02-28 18:10:45 UTC (rev 605)
+++ trunk/CHANGELOG.txt	2007-02-28 18:50:40 UTC (rev 606)
@@ -2,6 +2,7 @@
 * ConfigHelper.ptl: Fix a problem in __addit__ method, when creating a new
 * object all createAsteriskConfig() from all objects where called.
 * Little name change to skip check in checkConfig() (for extensions to jump in an IVR)
+* Better dialout's macros handling
 
 2007-02-27:
 * languages.py: installing the gettext classes using unicode

Modified: trunk/cfg_dialout_normal.py
===================================================================
--- trunk/cfg_dialout_normal.py	2007-02-28 18:10:45 UTC (rev 605)
+++ trunk/cfg_dialout_normal.py	2007-02-28 18:50:40 UTC (rev 606)
@@ -119,30 +119,24 @@
 		c.append("; params: exten,secret,timeout")
 		needModule("app_authenticate")
 		if self.dis_transfer:
-		       opts="tW"
+		       opts="tWr"
 		else:
-		       opts="TtW"
+		       opts="TtWr"
+		c.append("exten=>s,1,SetVar(options=%s)" % opts)
 		if self.qlookup:
-			c.appendExten("s",'SetVar(options=%sr)' % opts)
-			c.appendExten("s","Set(dest=${DB(QUICKDIALLIST/GLOBAL/${ARG1})})",e="Goto(3)")
-			c.appendExten("s",'Set(ARG1=${dest})')
-			c.appendExten("s","GotoIf($[${ARG2} = n]?6:5)")
-			c.appendExten("s","Authenticate(${ARG2})")
-			c.appendExten("s","GotoIf($[${ARG3} = 0]?7:10)")
-			c.appendExten("s",'Set(timeout=0)')
-			c.appendExten("s",'Set(options=%s)' % opts)
-			c.appendExten("s",'Goto(11)')
-		else:
-			c.appendExten("s",'SetVar(options=%sr)' % opts)
-			c.appendExten("s","GotoIf($[${ARG2} = n]?4:3)")
-			c.appendExten("s","Authenticate(${ARG2})")
-			c.appendExten("s","GotoIf($[${ARG3} = 0]?5:8)")
-			c.appendExten("s",'Set(timeout=0)')
-			c.appendExten("s",'Set(options=%s)' % opts)
-			c.appendExten("s",'Goto(9)')
-		c.appendExten("s",'Set(timeout=%d)' % self.maxtime)
-		c.appendExten("s",'Set(options=%sL(%d000:10000))' % (opts,self.maxtime))
+			c.append("exten=>s,n(quickd),Set(dest=${DB(QUICKDIALLIST/GLOBAL/${ARG1})})")
+			c.append("exten=>s,quickd+1,Goto(ifAuth)")
+			c.append("exten=>s,n,Set(ARG1=${dest})")
+		c.append("exten=>s,n(ifAuth),GotoIf($[${ARG2} = n]?ifTimeOut:auth)")
+		c.append("exten=>s,n(auth),Authenticate(${ARG2})")
+		c.append("exten=>s,n,Set(options=%s)" % opts.strip('r'))
+		c.append("exten=>s,n(ifTimeOut),GotoIf($[${ARG3} = 0]?noTimeOut:setTimeOut)")
+		c.append("exten=>s,n(noTimeOut),Set(timeout=0)")
+		c.append("exten=>s,n,Goto(CallLimit)")
+		c.append("exten=>s,n(setTimeOut),Set(timeout=%d)" % self.maxtime)
+		c.append("exten=>s,n(CallLimit),Set(options=%sL(%d000:10000))" % (opts,self.maxtime))
 		#TODO: add this trunks sorted by price and with a default one.
+
 		import configlets
 		tapisupport = False
 		for obj in configlets.configlet_tree:
@@ -152,27 +146,28 @@
 		for obj in configlets.configlet_tree['Trunks']:
 			try:
 				if self.__getitem__("trunk_"+obj.name):
-					c.appendExten("s","Set(TIMEOUT(absolute)=${timeout})")
-					c.appendExten("s","Set(CDR(outtrunk)=%s)" % obj.name)
+					c.append("exten=>s,n,Set(TIMEOUT(absolute)=${timeout})")
+					c.append("exten=>s,n,Set(CDR(outtrunk)=%s)" % obj.name)
 					if self.__getitem__("trunk_%s_price" % obj.name):
-						c.appendExten("s","Set(CDR(accountcode)=%s)" % self.__getitem__("trunk_%s_price" % obj.name))
+						c.append("exten=>s,n,Set(CDR(accountcode)=%s)" % self.__getitem__("trunk_%s_price" % obj.name))
 					else:
-						c.appendExten("s","Set(CDR(accountcode)=0)")
+						c.append("exten=>s,n,Set(CDR(accountcode)=0)")
 					if obj.clidnameout:
-						c.appendExten("s","Set(CALLERID(name)=%s)" % obj.clidnameout)
+						c.append("exten=>s,n,Set(CALLERID(name)=%s)" % obj.clidnameout)
 					if obj.clidnumout:
-						c.appendExten("s","Set(CALLERID(number)=%s)" % obj.clidnumout)
+						c.append("exten=>s,n,Set(CALLERID(number)=%s)" % obj.clidnumout)
 				        if tapisupport:
-					        c.appendExten("s","Set(chan=${CUT(CHANNEL,,1)})")
-					        c.appendExten("s","UserEvent(TAPI|TAPIEVENT: LINE_NEWCALL ${chan})")
-	    				        c.appendExten("s","UserEvent(TAPI|TAPIEVENT: LINE_CALLSTATE LINECALLSTATE_DIALTONE)")
-					        c.appendExten("s","UserEvent(TAPI|TAPIEVENT: LINE_CALLSTATE LINECALLSTATE_DIALING)")
-					        c.appendExten("s","UserEvent(TAPI|TAPIEVENT: LINE_CALLSTATE LINECALLSTATE_PROCEEDING)")
-					c.appendExten("s","Dial(%s,%d|${options})" % (obj.dial,self.ringtime))
+					        c.append("exten=>s,n,Set(chan=${CUT(CHANNEL,,1)})")
+					        c.append("exten=>s,n,UserEvent(TAPI|TAPIEVENT: LINE_NEWCALL ${chan})")
+	    				        c.append("exten=>s,n,UserEvent(TAPI|TAPIEVENT: LINE_CALLSTATE LINECALLSTATE_DIALTONE)")
+					        c.append("exten=>s,n,UserEvent(TAPI|TAPIEVENT: LINE_CALLSTATE LINECALLSTATE_DIALING)")
+					        c.append("exten=>s,n,UserEvent(TAPI|TAPIEVENT: LINE_CALLSTATE LINECALLSTATE_PROCEEDING)")
+					c.append("exten=>s,n,Dial(%s,%d|${options})" % (obj.dial,self.ringtime))
 			except KeyError:
 				pass
-		c.appendExten("s","Congestion(5)")
-		c.appendExten("s","Goto(9)")
+		c.append("exten=>s,n,Congestion(5)")
+		#c.append("exten=>s,n,Goto(9)")
+		c.append("exten=>s,n,Goto(CallLimit)")
 		c.appendExten("T","ResetCDR(w)")
 		c.appendExten("T","NoCDR")
 		c.appendExten("T","Hangup")



From santiago at mail.berlios.de  Wed Feb 28 23:44:13 2007
From: santiago at mail.berlios.de (santiago at BerliOS)
Date: Wed, 28 Feb 2007 23:44:13 +0100
Subject: [Destar-dev] r607 - in trunk: . po
Message-ID: <200702282244.l1SMiDEJ000841@sheep.berlios.de>

Author: santiago
Date: 2007-02-28 23:44:13 +0100 (Wed, 28 Feb 2007)
New Revision: 607

Modified:
   trunk/CHANGELOG.txt
   trunk/po/Makefile
Log:
* Added -j xgettext's option in po/Makefile



Modified: trunk/CHANGELOG.txt
===================================================================
--- trunk/CHANGELOG.txt	2007-02-28 18:50:40 UTC (rev 606)
+++ trunk/CHANGELOG.txt	2007-02-28 22:44:13 UTC (rev 607)
@@ -3,6 +3,7 @@
 * object all createAsteriskConfig() from all objects where called.
 * Little name change to skip check in checkConfig() (for extensions to jump in an IVR)
 * Better dialout's macros handling
+* Added -j xgettext's option in po/Makefile
 
 2007-02-27:
 * languages.py: installing the gettext classes using unicode

Modified: trunk/po/Makefile
===================================================================
--- trunk/po/Makefile	2007-02-28 18:50:40 UTC (rev 606)
+++ trunk/po/Makefile	2007-02-28 22:44:13 UTC (rev 607)
@@ -16,7 +16,7 @@
 	install -m 644 $@ $(patsubst %.mo,../lang/%/LC_MESSAGES/destar.mo,$@)
 
 %.po:	../destar ../*.py ../*.ptl
-	xgettext --language=python -d $(@:.po=) -kM_ ../destar ../*.py ../*.ptl
+	xgettext --language=python -j -d $(@:.po=) -kM_ ../destar ../*.py ../*.ptl
 
 clean:
 	rm -rf *.mo



